(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74911],{61716:function(e,r,t){var n=t(20426);e.exports=function(e,r){var t;if("function"!=typeof r)throw TypeError("Expected a function");return e=n(e),function(){return--e>0&&(t=r.apply(this,arguments)),e<=1&&(r=void 0),t}}},59002:function(e,r,t){var n=t(61716);e.exports=function(e){return n(2,e)}},74440:function(e,r,t){"use strict";t.d(r,{G:function(){return d}});var n=t(11217),i=t(74596),o=t(39571),a=t(61439);function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?s(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let c={},u=i.Ps`
  mutation loginWithThirdPartyService($input: LoginWithThirdPartyServiceInput!) {
    loginWithThirdPartyService(input: $input) {
      error {
        ...Error
      }
    }
  }
  ${o.vN}
`;function d(e){let r=l(l({},c),e);return a.D(u,r)}},74911:function(e,r,t){"use strict";let n,i;t.r(r),t.d(r,{AuthContainer:function(){return tn},PANEL_WIDTH:function(){return tt},default:function(){return ti}});var o,a,s=t(11217),l=t(19803),c=t.n(l),u=t(34736),d=t.n(u),f=t(96873),p=t(50959),m=t(5964),b=t(22827),O=t(30946),v=t(21754),g=t(96470),y=t(87720),j=t(36122),h=t(80417),E=t(91757),R=t(91550),x=t(71511),C=t(44636),S=t(36763),w=t(46734),P=t(92561),I=t(76944),Z=t(30347),k=t(27052),_=t(74440),N=t(22754),D=t(42150),T=t(61711),A=t(4168),L=t(6318),F=t(89281),M=t(2069),U=t(71495),G=t(44821),B=t(7566),V=t(11527);function K(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}(o=n||(n={}))[o.SUCCESS=1]="SUCCESS",o[o.ERROR=0]="ERROR",o[o.NO_TIE=-1]="NO_TIE";let q=()=>{let{refetch:e}=(0,D.Z)("cache-first",!0),{sendNotification:r}=(0,x.ZP)(),[t,{error:i,loading:o}]=(0,_.G)(),a=(0,p.useCallback)(async r=>{try{var i,o,a;let s=await t({variables:{input:{token:r,refreshToken:null,service:N.FR.Facebook,grantType:N.eW.AccessToken}},context:{headers:{[T.eX]:null===(i=(0,T.pc)())||void 0===i?void 0:i.token,[A.G]:(0,A.V)()},uri:F.M}}),l=null==s?void 0:null===(o=s.data)||void 0===o?void 0:o.loginWithThirdPartyService;if((null==l?void 0:null===(a=l.error)||void 0===a?void 0:a.code)===B.Rb)return(0,L.q)(G.Mk.NO_TIE_ERROR),(0,G.bF)(G.Mk.NO_TIE_ERROR),n.NO_TIE;if((0,M.gC)(l))return e(),(0,L.q)(G.Mk.FACEBOOK_SUCCESS),(0,G.bF)(G.Mk.FACEBOOK_SUCCESS),n.SUCCESS;return(0,L.q)(G.Mk.FACEBOOK_FAILURE),(0,G.bF)(G.Mk.FACEBOOK_FAILURE),n.ERROR}catch(e){return(0,L.q)(G.Mk.FACEBOOK_FAILURE),(0,G.bF)(G.Mk.FACEBOOK_FAILURE),n.ERROR}},[t,e]);return(0,p.useEffect)(()=>{i&&r((0,V.jsx)(h.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?K(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):K(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({},U.Z.loginError)),{type:x.Dy.ERROR,autoClose:!0})},[i,r]),{loading:o,facebookLogin:a}};var $=t(53274),H=t.n($),W=t(29437),Y=t.n(W),z=t(74596),Q=t(11137),X=t(76185);function J(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function ee(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?J(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):J(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let er={},et=z.Ps`
  query requireCaptcha($captchaType: CaptchaType) {
    requireCaptcha(captchaType: $captchaType) {
      requireCaptcha
      error {
        ...Error
      }
    }
  }
  ${Q.vN}
`;var en=t(14224);let ei=["resetHash"];function eo(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function ea(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?eo(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eo(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let{RECAPTCHA_V2_KEY:es="6LcA8EUUAAAAAG17qfEfNaX6H8ozmI-IvmokZUnZ"}=en.env,el=function(e){var r,t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{data:i,error:o}=function(e){let r=ee(ee({},er),e);return X.a(et,r)}({variables:{captchaType:e},skip:n}),a=!!(null!=i&&null!==(r=i.requireCaptcha)&&void 0!==r&&r.requireCaptcha)||!!o||!!(null!=i&&null!==(t=i.requireCaptcha)&&void 0!==t&&t.error);return{needsCaptcha:a}},ec=()=>{let{0:e,1:r}=(0,p.useState)(void 0),t=(0,p.useCallback)(()=>{r((e||0)+1)},[e]);return[e,t]},eu=e=>{let{resetHash:r}=e,t=(0,g.Z)(e,ei),{0:n,1:i}=(0,p.useState)(),{submitCount:o}=(0,y.u6)(),[,{error:a},{setValue:s}]=(0,y.U$)("captcha"),l=(0,p.useRef)(null);return(0,p.useEffect)(()=>{if(!l.current)return;let e=()=>{try{grecaptcha.render(l.current,{sitekey:es,callback:e=>{s(e)},"expired-callback":()=>{s(void 0)},"error-callback":()=>{s(void 0)}})}catch(e){}},r=H()("recatchaOncallback");return window[r]=e,i(r),()=>{window[r]=void 0}},[]),(0,p.useEffect)(()=>{if(r)try{s(void 0),grecaptcha.reset()}catch(e){}},[r]),(0,V.jsxs)("div",ea(ea({},t),{},{children:[n&&(0,V.jsx)(Y(),{src:`https://www.google.com/recaptcha/api.js?onload=${n}&render=explicit`}),(0,V.jsxs)("div",{className:c()("w-full overflow-hidden","dljoyr2"),children:[(0,V.jsx)("div",{ref:l}),o>0&&a&&(0,V.jsx)("div",{className:"mt-1 text-sm text-alertRed",children:(0,V.jsx)(h.Z,ea({},a))})]})]}))};var ed=(0,p.memo)(eu);t(78937);var ef=t(48630);let ep=["title","description","handler","footer","className"];function em(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function eb(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?em(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):em(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let eO=e=>{let{title:r,description:t,handler:n,footer:i,className:o}=e,a=(0,g.Z)(e,ep);return(0,V.jsxs)("div",eb(eb({},a),{},{className:c()(o,"flex flex-col items-center pt-8"),children:[(0,V.jsx)(ef.Z,{alt:"",role:"presentation",src:"/images/login/letter.svg",width:"120",height:"120"}),(0,V.jsx)("h1",{className:"ds-font-title-2 mb-2 mt-10 font-semibold",children:r}),(0,V.jsx)("div",{className:"mb-9 text-center",children:t}),n,(0,V.jsx)("div",{className:"ds-font-tiny text-center text-gray6",children:i})]}))};var ev=t(93086);let eg=()=>(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("svg",{className:"absolute left-0 top-0",width:"119",height:"164",viewBox:"0 0 119 164",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,V.jsx)("path",{d:"M110.828 64.5715C101.08 79.2181 80.6995 88.0884 67.5824 96.1073C54.4151 104.318 48.6319 111.606 41.0813 120.581C33.4603 129.434 24.3129 139.832 9.61932 149.588C-5.02416 159.151 -25.2843 167.951 -36.8417 161.418C-48.3991 154.886 -51.3743 133.091 -50.9515 115.473C-50.5287 97.8547 -46.6375 84.533 -50.5238 68.9552C-54.2191 53.4277 -65.6216 35.7651 -63.9307 22.2731C-62.1193 8.71038 -47.2849 -0.802786 -32.0859 -4.68559C-16.8165 -8.44734 -1.25282 -6.69978 17.5823 -12.3907C36.2264 -18.132 58.3329 -31.2614 75.7556 -28.8186C93.2284 -26.5675 106.279 -8.57278 113.211 10.5755C119.953 29.6734 120.767 49.9753 110.828 64.5715Z",fill:"#97CAD1",fillOpacity:"0.1"})}),(0,V.jsx)("svg",{className:"absolute bottom-8 right-0",width:"91",height:"180",viewBox:"0 0 91 180",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,V.jsx)("path",{d:"M31.107 139.602C20.1459 122.471 5.63877 107.706 1.47524 89.707C-2.68829 71.7083 3.60187 50.5323 18.4541 39.4806C33.1962 28.3731 56.4501 27.2159 73.5743 25.334C90.5286 23.5146 101.413 20.8522 114.992 14.5031C128.68 8.20975 145.014 -1.94425 157.075 0.444413C169.135 2.83308 176.924 17.7644 182.153 32.2917C187.491 46.8747 190.44 60.9911 187.448 73.7358C184.515 86.3623 175.642 97.617 169.461 110.382C163.279 123.147 159.789 137.422 151.192 145.4C142.764 153.315 129.179 154.76 112.602 162.117C95.9148 169.419 76.1862 182.459 62.6946 179.347C49.203 176.234 41.8981 156.795 31.107 139.602Z",fill:"#FFAD43",fillOpacity:"0.1"})}),(0,V.jsx)("svg",{className:"absolute bottom-24 right-0",width:"20",height:"208",viewBox:"0 0 20 208",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,V.jsx)("path",{d:"M20.5684 161.408C12.928 141.862 1.19431 125.051 0.648726 104.462C0.103153 83.8722 10.8462 59.5676 28.2254 46.7997C45.5039 33.9689 69.4031 32.4757 87.2136 30.1965C104.838 27.9902 116.46 24.8618 131.579 17.4905C146.798 10.1822 165.5 -1.56785 177.283 1.08179C189.066 3.73141 193.929 20.7808 196.27 37.3857C198.712 54.0536 198.817 70.2042 193.159 84.8261C187.586 99.3121 176.249 112.269 167.341 126.938C158.434 141.606 151.955 157.984 141.571 167.186C131.372 176.315 117.252 178.067 98.8756 186.615C80.3986 195.1 57.6497 210.181 44.5597 206.712C31.4697 203.244 28.0231 181.027 20.5684 161.408Z",fill:"#F65858",fillOpacity:"0.1"})})]}),ey=()=>{let{formatMessage:e}=(0,j.Z)(),{submitCount:r,errors:t,isValid:n}=(0,y.u6)(),{makeAnnouncement:i}=(0,R.Z)(),{0:o,1:a}=(0,p.useState)(r);return(0,p.useEffect)(()=>{var s;let l=null===(s=Object.keys(t))||void 0===s?void 0:s.length;r>0&&l>0&&!n&&r!==o&&(a(r),i(e(U.Z.a11yValidationsError,{COUNT:l})))},[r,t,n,o,e,i]),null},ej=["children","dataEventCategory","a11yDescription","hasBackButton","backButtonAriaLabel","backButtonOnClick","isModal","showBg","isRegister"];function eh(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function eE(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?eh(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eh(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let eR=e=>{let{children:r,dataEventCategory:t,a11yDescription:n,hasBackButton:i,backButtonAriaLabel:o,backButtonOnClick:a,isModal:s,showBg:l,isRegister:u}=e,d=(0,g.Z)(e,ej);return(0,V.jsxs)("section",eE(eE({},d),{},{className:c()("w-full","sbdsy28",d.className),"data-event-category":t,children:[l&&(0,V.jsx)(eg,{}),n&&(0,V.jsx)("span",{className:"sr-only","aria-live":"polite",children:n}),(0,V.jsx)(ey,{}),i&&(0,V.jsx)("button",{"aria-label":o,onClick:a,className:c()("absolute top-3.5 h-6 sm:left-4 sm:top-5",s&&"left-2",!s&&u&&"left-6",!s&&!u&&"left-0"),type:"button",children:(0,V.jsx)(ef.Z,{alt:"",role:"presentation",src:"/images/design-system-icons/caret-left-outline.svg",width:"24",height:"24"})}),r]}))};t(35884);var ex=t(32847),eC=t(16337),eS=t(38740),ew=t(5233),eP=t(98540);function eI(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}let eZ=(e,r)=>{let{sendNotification:t}=(0,x.ZP)(),{0:n,1:i}=(0,p.useState)(!1),o=(0,p.useCallback)(()=>{t((0,V.jsx)(h.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?eI(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eI(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({},P.Z.socialLoginError)),{type:x.Dy.ERROR,autoClose:!0})},[t]),a=(0,p.useCallback)(async()=>{try{if(n)return;i(!0),await (0,eP.u)(),FB.login(t=>{if((null==t?void 0:t.status)==="connected"){var n;null==e||e(null==t?void 0:null===(n=t.authResponse)||void 0===n?void 0:n.accessToken)}else(null==t?void 0:t.status)!=="unknown"&&(r?r():o())},{scope:"email,user_friends",auth_type:"reauthorize"}),i(!1)}catch(e){r?r():o(),i(!1)}},[n,e,o,r]);return{getToken:a,fbProgress:n}};var ek=t(97425),e_=t(43690),eN=t(34677);let eD=["iconSrc","asButton","disabled"];function eT(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function eA(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?eT(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eT(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let eL=e=>{let{iconSrc:r,asButton:t,disabled:n}=e,i=(0,g.Z)(e,eD),o=t?C.ZP:eN.Z;return(0,V.jsxs)(o,eA(eA({tabIndex:0,role:"button"},i),{},{className:c()(i.className,"flex h-13 w-full cursor-pointer flex-row items-center justify-between rounded-lg border border-gray6 pl-4 font-normal hover:no-underline xs:no-underline",n&&"border-gray3 bg-gray3 text-gray5","c1g28vq9"),children:[r&&(0,V.jsx)(ef.Z,{alt:"",role:"presentation",src:r,width:"24",height:"24"}),i.children,(0,V.jsx)("i",{})]}))};t(11790);let eF=["onFacebookLogin","onFacebookRegister","returnUrl","onEmailRegister","isRegister","extraParams","hideFacebook"];function eM(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function eU(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?eM(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eM(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let eG=e=>{let{onFacebookLogin:r,onFacebookRegister:t,returnUrl:n,onEmailRegister:i,isRegister:o,extraParams:a,hideFacebook:s}=e,l=(0,g.Z)(e,eF),{locale:u}=(0,eC.M)(),d=(0,e_.tZ)(n,u,a),f=o||!1,m=f?d:n,b=(0,p.useCallback)(()=>{(0,v.mjF)((0,eS.Ht)(m,o))},[m,o]),{getToken:O,fbProgress:y}=eZ(o?t:r,b),{sendNotification:j}=(0,x.ZP)(),{0:E,1:R}=(0,p.useState)(!1);return(0,p.useLayoutEffect)(()=>{R((0,ew.j9)())},[]),(0,V.jsxs)("div",eU(eU({},l),{},{className:c()("flex w-full flex-col items-center space-y-4",l.className),children:[!s&&(0,V.jsx)(eL,{id:o?"facebook-register":"facebook-login","data-testid":o?"facebook-register":"facebook-login",onClick:e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),O())},href:(0,eS.Ht)(m,f),disabled:y,"data-element-name":o?G.zn.registerFacebook:G.Nh.loginFacebook,iconSrc:"/images/login/facebook.svg","data-event-label":o?"register-with-facebook-option":"login-with-facebook",children:(0,V.jsx)(h.Z,eU({},o?ek.Z.facebookBtn:U.Z.facebookBtn))}),(0,V.jsx)(eL,{id:o?"google-register":"google-login","data-testid":o?"google-register":"google-login",onClick:e=>{E&&(e.preventDefault(),(0,G.bF)(G.Mk.WEB_VIEW_ERROR),j((0,V.jsx)(h.Z,eU(eU({},U.Z.googleSignInAlert),{},{values:{LINK:(0,V.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:(0,v.AUq)(u),children:(0,V.jsx)(h.Z,eU({},U.Z.googleSignInAlertLink))})}})),{id:"google-alert",type:x.Dy.WARNING}))},disabled:!!E,href:(0,eS.qJ)(m,f),"data-element-name":o?G.zn.registerGoogle:G.Nh.loginGoogle,iconSrc:"/images/login/google.svg","data-event-label":o?"register-with-google-option":"login-with-google",children:(0,V.jsx)(h.Z,eU({},o?ek.Z.googleBtn:U.Z.googleBtn))}),(0,V.jsx)(eL,{id:o?"apple-register":"apple-login","data-testid":o?"apple-register":"apple-login",href:(0,eS.Ws)(m,f),"data-element-name":o?G.zn.registerApple:G.Nh.loginApple,iconSrc:"/images/login/apple.svg","data-event-label":o?"register-with-apple-option":"login-with-apple",children:(0,V.jsx)(h.Z,eU({},o?ek.Z.appleBtn:U.Z.appleBtn))}),o&&(0,V.jsx)("div",{className:"w-full","data-event-category":G.hf.GTM,children:(0,V.jsx)(eL,{asButton:!0,id:"email-register","data-testid":"email-register",onClick:i,iconSrc:"/images/login/email.svg","data-event-label":"register-with-email-option",children:(0,V.jsx)(h.Z,eU({},ek.Z.emailBtn))})})]}))};var eB=t(55423);function eV(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function eK(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?eV(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eV(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let eq={email:eB.Z_().email(U.Z.validationEmailFormat).required(U.Z.validationEmailRequired),"current-password":eB.Z_().required(U.Z.validationPasswordRequire)},e$={email:eB.Z_().email(U.Z.validationEmailFormat).required(U.Z.validationEmailRequired)},eH={verificationCode:eB.Z_().required(U.Z.verificationCodeRequired)},eW={captcha:eB.Z_().required(U.Z.validationCaptchaRequired)},eY=(e,r)=>{let t=(0,p.useMemo)(()=>{let t=eq;return e===M.f7.FORGOT_PASSWORD&&(t=e$),e===M.f7.SIFT_VERIFICATION&&(t=eH),r&&(t=eK(eK({},t),eW)),eB.Ry().shape(t)},[e,r]);return t},ez=["isLoading","loginHandler","forgotPasswordHandler","facebookLoginHandler","resendVerificationCodeHandler","returnUrl","checkVerificationCodeHandler","onLoginSuccess","isModal","reverifyMember","onRegisterClick","initialView","extraParams","disableBackButton"];function eQ(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function eX(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?eQ(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):eQ(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let eJ=e=>{let{isLoading:r,loginHandler:t,forgotPasswordHandler:i,facebookLoginHandler:o,resendVerificationCodeHandler:a,returnUrl:s,checkVerificationCodeHandler:l,onLoginSuccess:u,isModal:d,reverifyMember:f,onRegisterClick:m,initialView:b=M.f7.LOGIN,extraParams:O={},disableBackButton:_}=e,N=(0,g.Z)(e,ez),{registerUrl:D}=(0,k.Z)(s,O),T=(0,j.Z)(),{0:A,1:L}=(0,p.useState)(b),{makeAnnouncement:F}=(0,R.Z)(),{sendNotification:B,closeNotification:K}=(0,x.ZP)(),{0:q,1:$}=(0,p.useState)(null),H=A===M.f7.FORGOT_PASSWORD,[W,Y]=ec(),{needsCaptcha:z}=el(H?E.$I.ForgotPassword:E.$I.Login),Q=eY(A,z),X=A===M.f7.LOGIN,J=A===M.f7.FORGOT_PASSWORD_SUCCESS,ee=A===M.f7.SIFT_VERIFICATION,er=A===M.f7.REVERIFY_MEMBER,et=er||J,en=!X&&!er&&!_,ei=X||H,eo=!ee&&!er&&!J&&z,ea=!et,es=(0,p.useCallback)(e=>{e.metaKey||e.ctrlKey||((0,I.ZP)({event:"gaEvent",eventCategory:G.ul.GTM,eventAction:"click",eventLabel:G.ul.RESET_BTN}),e.preventDefault(),L(M.f7.FORGOT_PASSWORD))},[]),eu=(0,p.useCallback)(async e=>{let r=await t(e),{message:n}=r;switch(n){case M.dx.LOGIN_SUCCESS:F(T.formatMessage(U.Z.loginSuccessfulAnnouncement)),u();break;case M.dx.SIFT_VERIFICATION_REQUIRED:L(M.f7.SIFT_VERIFICATION),$({memberId:r.memberId,reverifyToken:r.reverifyToken});break;case M.dx.REVERIFY_REQUIRED:L(M.f7.REVERIFY_MEMBER),$({memberId:r.memberId,reverifyToken:r.reverifyToken});break;default:{let e;let r=![M.dx.BLOCKED_MEMBER,M.dx.BOUNCED,M.dx.PASSWORD_RESET_REQUIRED,M.dx.INITIAL_3RD_PARTY_REG].includes(n),t=[M.dx.PASSWORD_RESET_REQUIRED,M.dx.INITIAL_3RD_PARTY_REG].includes(n)?r=>{null==es||es(r),K(e)}:void 0;e=B((0,M.e$)(n,t),{type:x.Dy.ERROR,autoClose:r})}}},[t,u,T,F,B,K,es]),ef=(0,p.useCallback)(async e=>{let r=await o(e);r===n.SUCCESS?(F(T.formatMessage(U.Z.loginSuccessfulAnnouncement)),u()):B((0,V.jsx)(h.Z,eX({},r===n.NO_TIE?P.Z.noTieError:P.Z.socialLoginError)),{type:x.Dy.ERROR,autoClose:!0})},[o,T,F,u,B]),ep=(0,p.useCallback)(async(e,r)=>{let t=await i(e,r);t?L(M.f7.FORGOT_PASSWORD_SUCCESS):Y()},[i,Y]),em=(0,p.useCallback)(async e=>{let r=eX(eX({},e),q),t=await l(r);if(t.message===M.dx.CHECK_VERIFICATION_CODE_SUCCESS){$(null),u();return}B(T.formatMessage(t.message===M.dx.WRONG_CREDENTIALS_CODE?U.Z.verificationCodeValidationError:U.Z.verificationCodeError),{type:x.Dy.ERROR,autoClose:!0})},[q,l,u,T,B]),eb=(0,p.useCallback)(async()=>{let e=await a(null==q?void 0:q.memberId);B(T.formatMessage(e?U.Z.resendVerificationCodeSuccess:U.Z.resendVerificationCodeError),{type:e?x.Dy.SUCCESS:x.Dy.ERROR,autoClose:!0})},[a,T,q,B]),eg=(0,p.useCallback)(async()=>{let e=await f({reverifyToken:null==q?void 0:q.reverifyToken,memberId:null==q?void 0:q.memberId});B(T.formatMessage(e?U.Z.reverifyRequestEmailSuccess:U.Z.reverifyRequestEmailError),{type:e?x.Dy.SUCCESS:x.Dy.ERROR,autoClose:!0})},[f,T,q,B]),ey=(0,p.useCallback)(async e=>{if(A===M.f7.FORGOT_PASSWORD){await ep(e.email,e.captcha);return}if(A===M.f7.SIFT_VERIFICATION){await em(e);return}await eu(e)},[A,eu,ep,em]),ej=T.formatMessage(U.Z.title),eh=T.formatMessage(U.Z.registrationDescription),eE=T.formatMessage(U.Z.loginBtn),eC=G.Nh.loginSubmit,eS=T.formatMessage(U.Z.loginViewStateLogin),ew="";return X&&(ew="login-with-email"),H&&(ej=`${T.formatMessage(U.Z.forgotPassword)}?`,eh=T.formatMessage(U.Z.forgotPasswordDescription),eE=T.formatMessage(U.Z.forgotPasswordBtn),eC=G.Nh.forgotPasswordSubmit,eS=T.formatMessage(U.Z.loginViewStateForgotPassword),ew=eC),J&&(ej=T.formatMessage(U.Z.forgotPasswordSuccess),eh=T.formatMessage(U.Z.forgotPasswordDescriptionSuccess),eS=T.formatMessage(U.Z.forgotPasswordSuccess)),ee&&(ej=T.formatMessage(U.Z.siftVerificationTitle),eh=T.formatMessage(U.Z.siftVerificationDescription),eE=T.formatMessage(U.Z.verificationCodeBtn),eC=G.Nh.verifySubmit,eS=T.formatMessage(U.Z.loginViewStateVerification)),er&&(ej=T.formatMessage(U.Z.reverifyTitle),eS=T.formatMessage(U.Z.loginViewStateEmailVerification)),(0,V.jsx)(y.J9,{initialValues:{rememberMe:!0},onSubmit:ey,validationSchema:Q,children:e=>(er&&(eh=T.formatMessage(U.Z.reverifyDescription,{userEmail:e.values.email})),(0,V.jsxs)(eR,eX(eX({},N),{},{className:"flex flex-col items-center",dataEventCategory:G.Mk.GTM,a11yDescription:eS,hasBackButton:en,backButtonAriaLabel:T.formatMessage(U.Z.loginBackButton),backButtonOnClick:()=>{L(M.f7.LOGIN),$(null),e.resetForm()},isModal:d,children:[(0,V.jsxs)(y.l0,{onSubmit:e.handleSubmit,className:c()("w-full",en&&"pt-18 sm:pt-8"),children:[(0,V.jsxs)("div",{className:c()("flex flex-col",!et&&"mb-1 md:mb-8",{"items-start":H,"items-center":X}),children:[X&&(0,V.jsx)(Z.I4,{width:48,height:48,className:"mb-2"}),!et&&(0,V.jsx)("h1",{className:"ds-font-title-2 mb-2 font-semibold",children:ej}),(0,V.jsxs)("div",{className:"flex space-x-1",children:[!et&&(0,V.jsx)("span",{children:eh}),X&&(0,V.jsx)("a",{className:"text-viridian hover:no-underline",onClick:e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),m())},href:D,"data-element-name":G.Nh.signUp,"data-event-label":"signup-on-login",children:(0,V.jsx)(h.Z,eX({},U.Z.registrationLink))})]})]}),(0,V.jsxs)("div",{className:c()("flex flex-col-reverse items-center space-y-8 md:flex-col",N.className),children:[(0,V.jsxs)("div",{className:"w-full",children:[(0,V.jsxs)("div",{className:"flex w-full flex-col space-y-6",children:[ei&&(0,V.jsx)(ev.Z,{"aria-required":"true",id:"email",type:"email",name:"email","data-testid":"email",inputMode:"email",label:T.formatMessage(U.Z.emailLabel),className:c()("w-full",H&&"pt-4 sm:pt-0"),onChange:e.handleChange,onBlur:e.handleBlur}),X&&(0,V.jsx)(ex.Z,{id:"current-password","data-testid":"current-password",autoComplete:"current-password",name:"current-password",label:T.formatMessage(U.Z.passwordLabel),labelChildren:(0,V.jsx)("a",{id:"forgot-password",onClick:es,href:(0,v.TtQ)(),className:"ds-font-small text-viridian hover:no-underline","data-element-name":G.Nh.forgotPassword,"data-event-label":"forgot-password-on-login",children:(0,V.jsx)(h.Z,eX({},U.Z.forgotPassword))}),onChange:e.handleChange,onBlur:e.handleBlur})]}),eo&&(0,V.jsx)(ed,{className:"mt-6 sm:pb-2",resetHash:W}),X&&(0,V.jsx)(S.Z,{id:"rememberMe",name:"rememberMe",className:c()("c1jwr8t4","ds-font-small mt-6 items-center xl:cursor-pointer"),checked:e.values.rememberMe,onChange:e.handleChange,children:(0,V.jsx)("span",{className:"mt-0.5",children:(0,V.jsx)(h.Z,eX({},U.Z.rememberMe))})}),ee&&(0,V.jsx)(ev.Z,{"aria-required":"true",id:"verificationCode",name:"verificationCode","data-testid":"verificationCode",label:T.formatMessage(U.Z.verificationCodeLabel),onChange:e.handleChange,onBlur:e.handleBlur,className:"mt-4"}),ea&&(0,V.jsx)(C.ZP,{"data-testid":"submit",type:"submit",className:c()("ds-font-title-3 h-12 w-full",{"mt-4":X,"mt-6":!X}),name:"submitButton",disabled:r,variant:C.c7.PRIMARY,"data-element-name":eC,"data-event-label":ew,children:r&&(0,V.jsx)(w.Z,{className:"mx-auto my-0"})||eE})]}),X&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("div",{className:"jsutify-between flex w-full flex-row items-center",children:[(0,V.jsx)("div",{className:"w-full border-b border-gray2"}),(0,V.jsx)("span",{className:"px-3 text-gray6",children:(0,V.jsx)(h.Z,eX({},U.Z.socialDivider))}),(0,V.jsx)("div",{className:"w-full border-b border-gray2"})]}),(0,V.jsx)(eG,{extraParams:O,returnUrl:s,onFacebookLogin:ef})]})]}),X&&(0,V.jsx)("div",{className:"mt-8 flex justify-center",children:(0,V.jsx)("a",{href:(0,v.aVN)(),className:"ds-font-small text-viridian hover:no-underline","data-element-name":G.Nh.loginIssues,"data-event-label":"issues-with-login-on-login",target:"_blank",rel:"noreferrer",children:(0,V.jsx)(h.Z,eX({},U.Z.issuesWithLogin))})}),ee&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{className:"mt-8",children:(0,V.jsx)(h.Z,eX(eX({},U.Z.resendVerificationCode),{},{values:{resendBtn:(0,V.jsx)("button",{className:"text-viridian",type:"button",onClick:eb,"data-testid":"resendCode","data-element-name":G.Nh.resendCode,children:(0,V.jsx)(h.Z,eX({},U.Z.here))})}}))}),(0,V.jsx)("div",{className:"mt-2",children:(0,V.jsx)(h.Z,eX(eX({},U.Z.contactUs),{},{values:{contactLink:(0,V.jsx)("a",{href:"mailto:privacy@meetup.com",className:"text-viridian hover:no-underline","data-element-name":G.Nh.contactUs,children:(0,V.jsx)(h.Z,eX({},U.Z.here))})}}))})]})]}),et&&(0,V.jsx)(eO,{title:ej,description:eh,handler:er&&(0,V.jsx)("a",{href:"#",className:"ds-font-small mb-2 text-viridian hover:no-underline",onClick:eg,"data-element-name":G.Nh.requestEmail,children:r&&(0,V.jsx)(w.Z,{})||T.formatMessage(U.Z.reverifyCheckListStep2)})||null,footer:(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(h.Z,eX(eX({},er?U.Z.reverifyCheckListStep3:U.Z.forgotPasswordSuccessSupport),{},{values:{link:(0,V.jsx)("a",{target:"_blank",rel:"noreferrer",href:v.Dk8,className:"text-viridian hover:no-underline","data-element-name":G.Nh.support,children:(0,V.jsx)(h.Z,eX({},er?U.Z.reverifyCheckListStep3Link:U.Z.forgotPasswordSuccessSupportLink))})}}))})})]})))})};t(12464);var e0=t(7245),e1=t(29139),e2=t(21866),e4=t(10074),e7=t(32128),e8=t(46398),e6=t(93713),e9=t(66601);let e5=["inputProps"];function e3(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function re(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?e3(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):e3(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let rr=e=>{let{inputProps:r}=e,t=(0,g.Z)(e,e5),{submitCount:n}=(0,y.u6)(),[{value:i},{touched:o,error:a},{setValue:s}]=(0,y.U$)("age"),l=(n>0||o)&&a,u="age-error";return(0,V.jsxs)("div",re(re({},t),{},{children:[(0,V.jsx)(S.Z,re(re({},r),{},{id:"age",name:"age",className:c()("c1akf99s","ds-font-small -ml-0.5 mt-1 items-end xl:cursor-pointer"),"aria-describedby":l?u:void 0,"data-testid":"age",checked:i,onChange:e=>s(e.currentTarget.checked),children:(0,V.jsx)("span",{className:"mr-2",children:(0,V.jsx)(h.Z,re({},ek.Z.ageText))})})),l&&(0,V.jsxs)("div",{id:u,className:"ds-font-tiny mt-1 text-alertRed",children:[(0,V.jsxs)("span",{className:"sr-only",children:[(0,V.jsx)(h.Z,re({},U.Z.errorLabel)),"\xa0"]}),(0,V.jsx)(h.Z,re({},a))]})]}))};t(69985);let rt=(0,p.memo)(e=>{let{onChange:r}=e,{values:t}=(0,y.u6)();return(0,p.useEffect)(()=>{r(null==t?void 0:t.countryCode)},[r,null==t?void 0:t.countryCode]),null});rt.displayName="DetectCountryChange";var rn=t(68568),ri=t(24402);function ro(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}let ra=()=>{let{userLocation:e}=(0,rn.TH)(),[{value:r},{touched:t,error:n},{setValue:i}]=(0,y.U$)("location"),{setFieldValue:o,submitCount:a}=(0,y.u6)(),l=(null==e?void 0:e.city)!==void 0&&(null==e?void 0:e.country)!==void 0?`${null==e?void 0:e.city}, ${null==e?void 0:e.country.toUpperCase()}`:"",u=e=>{i(null==e?void 0:e.city),o("countryCode",null==e?void 0:e.country,!1),o("zipCode",null==e?void 0:e.zip,!1)};return(0,p.useEffect)(()=>{!r&&e&&u(e)},[r,e]),(0,V.jsxs)("div",{children:[(0,V.jsx)(ri.Z,{locationName:l,strategy:"absolute",forcedSearchParams:{},onSelect:e=>{u(e)},clickIdContext:"register",hasIcon:!0,inputClassName:"w-full xs:rounded-l-lg xs:rounded-r-lg border pl-11 xs:border-gray2",dropdownClassName:c()("sm:border-gray2 sm:px-1 sm:py-1 text-secondary w-full","sq0xflc"),itemClassName:"p-4",selectedItemClassName:"text-primary bg-gray1"}),(a>0||t)&&n&&(0,V.jsx)("div",{id:"location-error",className:"ds-font-tiny mt-1 text-alertRed",children:(0,V.jsx)(h.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ro(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ro(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({},n))})]})};t(81523);var rs=t(88794),rl=t(39571),rc=t(37787);function ru(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function rd(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ru(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ru(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let rf={},rp=z.Ps`
  query getThirdPartyRegistrantInfo($input: ThirdPartyRegistrantInfoInput!) {
    thirdPartyRegistrantInfo(input: $input) {
      email
      name
      idToken
      refreshToken
      status
      error {
        ...Error
      }
    }
  }
  ${rl.vN}
`;var rm=t(81817);(a=i||(i={}))[a.UNKNOWN=0]="UNKNOWN",a[a.NEW_USER=1]="NEW_USER",a[a.EXISTING_USER=2]="EXISTING_USER";let rb=(e,r,t)=>{var n,o;let[a,{data:s,called:l,loading:c,error:u}]=function(e){let r=rd(rd({},rf),e);return rc.t(rp,r)}({fetchPolicy:"cache-and-network",ssr:!1}),d=i.UNKNOWN;[E.Vv.ExistingAccount,E.Vv.ExistingTie].includes(null==s?void 0:null===(n=s.thirdPartyRegistrantInfo)||void 0===n?void 0:n.status)&&(d=i.EXISTING_USER),(null==s?void 0:null===(o=s.thirdPartyRegistrantInfo)||void 0===o?void 0:o.status)===E.Vv.NewRegistration&&(d=i.NEW_USER);let f=(!!e||t&&(0,rm.Jj)())&&r===e_.KG.SOCIAL_FINISH&&(!l||c)&&!u||d===i.EXISTING_USER||(0,rm.Jj)()&&r===e_.KG.SOCIAL_FINISH;return(0,p.useEffect)(()=>{let t=async()=>{null!=e&&e.token&&a&&r===e_.KG.SOCIAL_FINISH&&await a({variables:{input:{token:null==e?void 0:e.token,service:null==e?void 0:e.type,grantType:(0,B.hl)(null==e?void 0:e.type,!1)}},context:{uri:F.M}})};t()},[e,r,a]),{data:s,showLoading:f,status:d}},rO=e=>{let{email:r,name:t}=e,{setFieldValue:n,touched:i}=(0,y.u6)();return(0,p.useEffect)(()=>{r&&!i.email&&n("email",r),t&&!i.name&&n("name",t)},[r,t,i.email,i.name]),null};var rv=t(78487);let rg=["isLoading","registerHandler","socialRegisterHandler","returnUrl","onRegisterSuccess","isModal","onLoginClick","reverifyMember","starbucksRegisterHandler","initialViewState","extraParams"];function ry(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function rj(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ry(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ry(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let rh=e=>{switch(e){case e_.KG.EMAIL_FINISH:return(0,V.jsx)(h.Z,rj({},ek.Z.registerViewStateEmailRegistration));case e_.KG.SOCIAL_FINISH:return(0,V.jsx)(h.Z,rj({},ek.Z.registerViewStatePersonal));case e_.KG.ALMOST_DONE:return;case e_.KG.REVERIFY_MEMBER:return(0,V.jsx)(h.Z,rj({},ek.Z.registerViewStateVerification));case e_.KG.MAIN:default:return(0,V.jsx)(h.Z,rj({},ek.Z.registerViewAllyMessage))}},rE=e=>{switch(e){case e_.dK.INVALID_NAME_FORMAT:return(0,V.jsx)(h.Z,rj({},ek.Z.registerInvalidName));case e_.dK.INVALID_ZIP:return(0,V.jsx)(h.Z,rj({},ek.Z.registerInvalidZip));case e_.dK.INVALID_CAPTCHA:return(0,V.jsx)(h.Z,rj({},ek.Z.registerInvalidCaptcha));case e_.dK.INVALID_PASSWORD:return(0,V.jsx)(h.Z,rj({},ek.Z.validationPasswordInvalid));case e_.dK.INVALID_PASSWORD_LENGTH:return(0,V.jsx)(h.Z,rj(rj({},ek.Z.validationPasswordInvalidLength),{},{values:{HELP_LINK:(0,V.jsx)("a",{href:(0,v.jjF)(),children:(0,V.jsx)(h.Z,rj({},ek.Z.helpPasswordLink))})}}));case e_.dK.INVALID_PASSWORD_COMMON:return(0,V.jsx)(h.Z,rj(rj({},ek.Z.validationPasswordInvalidCommon),{},{values:{HELP_LINK:(0,V.jsx)("a",{href:(0,v.jjF)(),children:(0,V.jsx)(h.Z,rj({},ek.Z.helpPasswordLink))})}}));case e_.dK.INVALID_PASSWORD_PWND:return(0,V.jsx)(h.Z,rj(rj({},ek.Z.validationPasswordInvalidPwnd),{},{values:{HELP_LINK:(0,V.jsx)("a",{href:(0,v.jjF)(),children:(0,V.jsx)(h.Z,rj({},ek.Z.helpPasswordLink))})}}));case e_.dK.MISSING_LOCATION_NUMBER_STARBUCKS:return(0,V.jsx)(h.Z,rj({},ek.Z.starbucksMissingNumber));case e_.dK.USED_LOCATION_NUMBER_STARBUCKS:return(0,V.jsx)(h.Z,rj({},ek.Z.starbucksUsedNumber));case e_.dK.INVALID_LOCATION_NUMBER_STARBUCKS:return(0,V.jsx)(h.Z,rj({},ek.Z.starbucksInvalidNumber));default:return(0,V.jsx)(h.Z,rj({},ek.Z.registerError))}},rR=e=>{var r,t;let{isLoading:n,registerHandler:o,socialRegisterHandler:a,returnUrl:s,onRegisterSuccess:l,isModal:u,onLoginClick:d,reverifyMember:m,starbucksRegisterHandler:b,initialViewState:S=e_.KG.MAIN,extraParams:P={}}=e,I=(0,g.Z)(e,rg),{formatMessage:_}=(0,j.Z)(),{query:N}=(0,f.useRouter)(),{remove:T}=(0,e0.Z)(),{refetch:A}=(0,D.Z)("cache-first",!0),{locale:F}=(0,eC.M)(),{loginUrl:M,registerUrl:U}=(0,k.Z)(s,P),{0:K,1:q}=(0,p.useState)(),{login:$,loginError:H,loginSuccess:W,called:Y}=(0,e9.Z)(),z=null==N?void 0:N[e_.lB],Q=null==N?void 0:N[e_.Lo],X=z===e_.Su.SOCIAL,J=S;X&&(J=e_.KG.SOCIAL_FINISH),z===e_.Su.EMAIL&&(J=e_.KG.EMAIL_FINISH),Q===e_.Bt.STARBUCKS&&(J=e_.KG.STARBUCKS);let{0:ee,1:er}=(0,p.useState)(J),{sendNotification:et,closeNotification:en}=(0,x.ZP)(),{makeAnnouncement:ei}=(0,R.Z)(),{0:eo,1:ea}=(0,p.useState)(null),{data:es,showLoading:eu,status:ep}=rb(K,ee,X),em=ee===e_.KG.MAIN,eb=ee===e_.KG.EMAIL_FINISH,eg=ee===e_.KG.SOCIAL_FINISH,ey=eb||eg&&!eu,ej=ee===e_.KG.REVERIFY_MEMBER,eh=ee===e_.KG.ALMOST_DONE,eE=ee===e_.KG.STARBUCKS,ew=em||eb,{needsCaptcha:eP}=el(E.$I.Register,!(eb||eE)),eI=!!((eb||eE)&&eP),[eN,eD]=ec(),{onCountryChange:eT,hasDuesTerms:eA,hasKISA:eL,terms:eF}=(0,e4.YU)();(0,p.useEffect)(()=>{eA&&(0,e2.Y0)()},[eA]);let eM=(0,rv.Z)(ee,eI,eF),eU=rh(ee),eB=eg||eb||eE,eV=G.zn.registerSubmit;eg&&((null==K?void 0:K.type)===E.FR.Facebook&&(eV=G.zn.registerFacebook),(null==K?void 0:K.type)===E.FR.Apple&&(eV=G.zn.registerApple),(null==K?void 0:K.type)===E.FR.Google&&(eV=G.zn.registerGoogle)),eE&&(eV=G.zn.registerStarbucks);let eK=(0,p.useCallback)(async(e,r,t,n)=>{let i=await a(e,r,t,n);(0,B.qz)(),i?(ei(_(ek.Z.registerSuccessfulAnnouncement)),A(),l()):(eD(),et(_(ek.Z.socialRegisterError),{type:x.Dy.ERROR,autoClose:!0}))},[_,et,a,ei,l,A,eD]),eq=(0,p.useCallback)(e=>{q({token:e,type:E.FR.Facebook}),er(e_.KG.SOCIAL_FINISH)},[]),e$=(0,p.useCallback)(()=>{(0,v.mjF)((0,eS.Ht)(U,!0))},[U]),eH=(0,p.useCallback)(e=>{e.metaKey||e.ctrlKey||(e.preventDefault(),d())},[d]),{getToken:eW}=eZ(eq,e$);(0,p.useEffect)(()=>{z===e_.Su.FACEBOOK&&(T(e_.lB),eW())},[z]);let eY=(0,p.useCallback)(async e=>{let r=await o(e);switch(r.message){case e_.dK.REGISTER_SUCCESS:{ei(_(ek.Z.registerSuccessfulAnnouncement));let e=(0,e8.Ar)(r.memberEmail);ea({memberId:r.memberId,inboxUrl:e,reverifyToken:r.reverifyToken}),er(e_.KG.ALMOST_DONE);break}case e_.dK.EMAIL_ALREADY_EXISTS:{let e;eD();let r=(0,V.jsx)(h.Z,rj(rj({},ek.Z.registerEmailAreadyExists),{},{values:{LINK:(0,V.jsx)("a",{className:"underline",href:M,onClick:r=>{en(e),eH(r)},children:(0,V.jsx)(h.Z,rj({},ek.Z.registerEmailAreadyExistsLink))})}}));e=et(r,{type:x.Dy.ERROR,autoClose:!1});break}default:eD(),et(rE(r.message),{type:x.Dy.ERROR,autoClose:!0})}},[eH,M,_,en,o,ei,eD,et]),ez=(0,p.useCallback)(()=>{er(e_.KG.EMAIL_FINISH)},[]),eQ=(0,p.useCallback)(async()=>{let e=await m({reverifyToken:null==eo?void 0:eo.reverifyToken,memberId:null==eo?void 0:eo.memberId});return et(_(e?ek.Z.reverifyRequestEmailSuccess:ek.Z.reverifyRequestEmailError),{type:e?x.Dy.SUCCESS:x.Dy.ERROR,autoClose:!0}),!!e},[m,eo,et,_]),eX=(0,p.useCallback)(async e=>{let r=await b(e);r.message===e_.dK.REGISTER_SUCCESS?(ei(_(ek.Z.registerSuccessfulAnnouncement)),(0,v.mjF)((0,v.PDR)())):(eD(),et(rE(r.message),{type:x.Dy.ERROR,autoClose:!0}))},[b,ei,eD,et,_]);(0,p.useEffect)(()=>{let e=(0,B.YG)();null!=e&&e.token&&q(e)},[]);let eJ=(0,p.useCallback)(async e=>{let r=rj(rj({},N),P),t=(0,O.NN)(r),n=(0,O.hX)(r),i=(0,O.JL)(r),o=rj(rj({},e),{},{locale:F,groupId:t,eventId:n,returnUri:i,terms:(0,e7.Xy)(e,eF)});if(eg){if(null!=K&&K.token){var a;await eK(o,(0,B.Xg)(K,es),null==K?void 0:K.type,null==es?void 0:null===(a=es.thirdPartyRegistrantInfo)||void 0===a?void 0:a.refreshToken)}return}if(eE){await eX(o);return}await eY(o)},[N,P,F,eF,eg,eE,eY,K,eK,es,eX]);return(0,p.useEffect)(()=>{let e=async()=>{try{var e,r;let t=K.type===E.FR.Google?null==es?void 0:null===(e=es.thirdPartyRegistrantInfo)||void 0===e?void 0:e.idToken:void 0;await $(t||(null==K?void 0:K.token),K.type,null==es?void 0:null===(r=es.thirdPartyRegistrantInfo)||void 0===r?void 0:r.refreshToken)}catch(e){(0,B.qz)(),(0,L.q)(G.Mk.THIRD_PARTY_SERVICE_FAILURE),(0,G.bF)((0,e_.Qf)(null==K?void 0:K.type,!1)),et(_(ek.Z.socialRegisterError),{type:x.Dy.ERROR,autoClose:!0}),er(e_.KG.MAIN)}};Y||ep!==i.EXISTING_USER||e()},[_,es,Y,K,ep,$,et]),(0,p.useEffect)(()=>{W&&((0,L.q)(G.Mk.THIRD_PARTY_SERVICE_SUCCESS),(0,G.bF)((0,e_.Qf)(null==K?void 0:K.type,!0)),A(),l(!0)),H&&((0,L.q)(G.Mk.THIRD_PARTY_SERVICE_FAILURE),(0,G.bF)((0,e_.Qf)(null==K?void 0:K.type,!1)),(0,B.qz)(),et(_(ek.Z.socialRegisterError),{type:x.Dy.ERROR,autoClose:!0}),er(e_.KG.MAIN))},[_,l,W,H,A,null==K?void 0:K.type,et]),(0,V.jsx)(y.J9,{initialValues:{age:!1,name:null==es?void 0:null===(r=es.thirdPartyRegistrantInfo)||void 0===r?void 0:r.name,email:null==es?void 0:null===(t=es.thirdPartyRegistrantInfo)||void 0===t?void 0:t.email},onSubmit:eJ,validationSchema:eM,children:e=>{var r,t,i,o,a,l,d,f;return(0,V.jsxs)(eR,rj(rj({},I),{},{className:"flex flex-col items-center",dataEventCategory:G.hf.GTM,a11yDescription:eU,hasBackButton:ey,backButtonAriaLabel:_(ek.Z.registerBackButton),backButtonOnClick:()=>{(0,B.qz)(),X?(0,v.mjF)(U):(null==e||e.resetForm(),er(e_.KG.MAIN))},isModal:u,showBg:eB,isRegister:!0,children:[(0,V.jsx)(rt,{onChange:eT}),(0,V.jsxs)(y.l0,{className:c()("w-full",(eb||eg)&&"pt-18 sm:pt-8",eE&&"pt-8",!u&&"px-6 sm:px-0"),children:[(0,V.jsxs)("div",{className:c()("flex flex-col",em||eE?"items-center":"items-start"),children:[em&&(0,V.jsx)(Z.I4,{width:48,height:48,className:"mb-2"}),eE&&(0,V.jsx)("div",{className:"mb-4",children:(0,V.jsx)(ef.Z,{alt:"",role:"presentation",src:"/images/register/starbucks-meetup-logo-mini.svg",width:"178",height:"64"})}),!ej&&!eh&&(0,V.jsx)("h1",{className:"ds-font-title-2 mb-2 font-semibold",children:(0,V.jsx)(h.Z,rj({},em||eE?ek.Z.title:ek.Z.emailSignupTitle))}),eg&&eu&&(0,V.jsx)(w.Z,{className:"mx-auto mb-8 mt-20"}),eE&&(0,V.jsx)("div",{className:"text-center",children:(0,V.jsx)(h.Z,rj({},ek.Z.starbucksDescription))})]}),(ey||eE)&&(0,V.jsxs)("div",{className:"mb-4 mt-8 flex w-full flex-col space-y-6",children:[(0,V.jsx)(rO,{email:null==es?void 0:null===(r=es.thirdPartyRegistrantInfo)||void 0===r?void 0:r.email,name:null==es?void 0:null===(t=es.thirdPartyRegistrantInfo)||void 0===t?void 0:t.name}),(0,V.jsx)(ev.Z,{autoFocus:!0,"aria-required":"true",id:"name","data-testid":"name",type:"text",autoComplete:"name",name:"name",label:_(eE?ek.Z.starbucksStoreName:ek.Z.registerNameLabel),onChange:null==e?void 0:e.handleChange,onBlur:null==e?void 0:e.handleBlur,labelClassname:"ds-font-body-medium",hint:_(eE?ek.Z.starbucksStoreNameHint:ek.Z.nameHint),value:(null==e?void 0:null===(i=e.values)||void 0===i?void 0:i.name)||""}),eE&&(0,V.jsx)(ev.Z,{"aria-required":"true",id:"storeNumber","data-testid":"storeNumber",type:"text",name:"storeNumber",label:_(ek.Z.starbucksStoreNumber),onChange:null==e?void 0:e.handleChange,onBlur:null==e?void 0:e.handleBlur,labelClassname:"ds-font-body-medium",value:(null==e?void 0:null===(o=e.values)||void 0===o?void 0:o.storeNumber)||""}),(0,V.jsx)(ev.Z,{"aria-required":"true",id:"email",type:"email",name:"email","data-testid":"email",placeholder:"example@email.com",inputMode:"email",label:_(eE?ek.Z.starbucksEmailLabel:ek.Z.emailLabel),className:"relative w-full",onChange:null==e?void 0:e.handleChange,onBlur:null==e?void 0:e.handleBlur,hint:_(ek.Z.emailHint),value:(null==e?void 0:null===(a=e.values)||void 0===a?void 0:a.email)||""}),(eb||eE)&&(0,V.jsxs)("div",{className:"relative w-full space-y-2",children:[(0,V.jsx)(ex.Z,{id:"new-password","data-testid":"new-password",autoComplete:"new-password",name:"new-password",label:_(ek.Z.registerPasswordLabel),labelContainerClassname:"xs:justify-start space-x-1 xs:items-center",onChange:null==e?void 0:e.handleChange,onBlur:null==e?void 0:e.handleBlur,labelChildren:(0,V.jsx)(e6.Z,{btnClassName:"mb-1.5",ariaLabel:_(ek.Z.passwordTooltipAriaLabel),toolTipText:_(ek.Z.passwordTooltipText),linkMessage:_(ek.Z.tooltipLinkText),linkUrl:(0,v.jjF)()})}),(0,V.jsx)(rs.Z,{password:null==e?void 0:null===(l=e.values)||void 0===l?void 0:l["new-password"]})]}),(0,V.jsxs)("span",{className:"my-4 flex flex-col",children:[(0,V.jsx)("label",{className:c()("mb-1 font-medium"),htmlFor:"location-bar-in-register",children:(0,V.jsx)(h.Z,rj({},ek.Z.locationLabel))}),(0,V.jsx)(ra,{}),(0,V.jsx)("span",{className:"mt-1 text-xs font-normal text-gray6",children:(0,V.jsx)(h.Z,rj({},ek.Z.locationHint))})]}),(0,V.jsxs)("div",{children:[(0,V.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,V.jsx)("span",{id:"age-label",className:"ds-font-body-medium",children:(0,V.jsx)(h.Z,rj({},ek.Z.ageLabel))}),(0,V.jsx)(e6.Z,{ariaLabel:_(ek.Z.ageTooltipAriaLabel),toolTipText:_(ek.Z.ageTooltipText),linkMessage:_(ek.Z.tooltipLinkText),linkUrl:(0,v.GUL)()})]}),(0,V.jsx)(rr,{inputProps:{"aria-labelledby":"age-label"}})]}),eA&&(0,V.jsx)("div",{children:(0,V.jsx)(e1.A,{terms:eF})}),eI&&(0,V.jsx)(ed,{className:"sm:pb-2",resetHash:eN}),(0,V.jsx)(C.ZP,{"data-testid":"submit-email-registration",type:"submit",className:"ds-font-title-3 h-12 w-full",name:"submitRegistrationButton",disabled:n,variant:C.c7.PRIMARY,"data-element-name":eV,"data-event-label":(0,e_.HA)(ee),children:n&&(0,V.jsx)(w.Z,{className:"mx-auto my-0"})||(0,V.jsx)(h.Z,rj({},ek.Z.registerBtn))}),(0,V.jsx)("p",{className:"ds-font-small text-center",children:(0,V.jsx)(h.Z,rj(rj({},eL?ek.Z.termsTextKISA:ek.Z.termsText),{},{values:{TERMS_LINK:(0,V.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"text-viridian underline",href:(0,v.Kpx)(F),"data-element-name":G.zn.terms,children:(0,V.jsx)(h.Z,rj({},ek.Z.termsLink))}),PRIVACY_LINK:(0,V.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"text-viridian underline",href:eL?(0,v.gfb)():(0,v.pwX)(F),"data-element-name":G.zn.privacy,children:(0,V.jsx)(h.Z,rj({},ek.Z.privacyLink))}),COOKIES_LINK:(0,V.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"text-viridian underline",href:eL?(0,v.$VJ)():(0,v.VqQ)(F),"data-element-name":G.zn.cookies,children:(0,V.jsx)(h.Z,rj({},ek.Z.cookiesLink))})}}))})]}),ew&&(0,V.jsxs)("div",{className:"flex justify-center space-x-1",children:[(0,V.jsx)("span",{children:(0,V.jsx)(h.Z,rj({},ek.Z.registerDescription))}),(0,V.jsx)("a",{className:"text-viridian hover:no-underline",onClick:eH,href:M,"data-element-name":G.zn.logIn,children:(0,V.jsx)(h.Z,rj({},ek.Z.loginLink))})]}),em&&(0,V.jsx)(eG,{onFacebookRegister:eq,isRegister:!0,returnUrl:s,extraParams:P,onEmailRegister:ez,className:"mt-8"})]}),ej&&(0,V.jsx)(eO,{className:!u&&"px-6 sm:px-0",title:_(ek.Z.reverifyTitle),description:_(ek.Z.reverifyDescription,{userEmail:null==e?void 0:null===(d=e.values)||void 0===d?void 0:d.email}),handler:(0,V.jsx)("a",{href:"#",className:"ds-font-small mb-2 text-viridian hover:no-underline",onClick:eQ,"data-element-name":G.zn.requestEmail,children:n&&(0,V.jsx)(w.Z,{})||(0,V.jsx)(h.Z,rj({},ek.Z.reverifyHandler))}),footer:(0,V.jsx)(h.Z,rj(rj({},ek.Z.reverifyFooter),{},{values:{link:(0,V.jsx)("a",{target:"_blank",rel:"noreferrer",href:v.Dk8,className:"text-viridian hover:no-underline","data-element-name":G.zn.support,children:(0,V.jsx)(h.Z,rj({},ek.Z.reverifyFooterLink))})}}))}),eh&&(0,V.jsx)(eO,{className:!u&&"px-6 sm:px-0",title:_(ek.Z.verificationTitle),description:_(ek.Z.verificationDescription,{EMAIL:null==e?void 0:null===(f=e.values)||void 0===f?void 0:f.email}),handler:(null==eo?void 0:eo.inboxUrl)&&(0,V.jsx)(C.ZP,{type:"button",className:"ds-font-title-3 mb-4 h-12 w-full",variant:C.c7.PRIMARY,onClick:()=>{window.open(null==eo?void 0:eo.inboxUrl,"_blank")},"data-event-label":"register-check-your-inbox",children:(0,V.jsx)(h.Z,rj({},ek.Z.verificationCheckBtn))}),footer:(0,V.jsx)(h.Z,rj(rj({},ek.Z.verificationResendText),{},{values:{VERIFICATION:(0,V.jsx)("a",{href:"#",className:"text-viridian hover:no-underline",onClick:async()=>{let e=await eQ();e&&!n&&er(e_.KG.REVERIFY_MEMBER)},"data-element-name":G.zn.requestEmail,"data-event-label":"register-request-another-verification-email",children:n&&(0,V.jsx)(w.Z,{className:"mx-auto my-0",size:"xs"})||(0,V.jsx)(h.Z,rj({},ek.Z.verificationResendLink))})}}))})]}))}})};var rx=t(61439);function rC(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function rS(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?rC(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rC(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let rw={},rP=z.Ps`
  mutation checkSiftVerificationCode($input: CheckSiftVerificationCodeInput!) {
    checkSiftVerificationCode(input: $input) {
      status
      error {
        ...Error
      }
    }
  }
  ${Q.vN}
`;function rI(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function rZ(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?rI(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rI(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let rk={},r_=z.Ps`
  mutation login($input: LoginInput!) {
    login(input: $input) {
      verificationRequired
      memberId
      reverifyToken
      error {
        ...Error
      }
    }
  }
  ${Q.vN}
`;function rN(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function rD(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?rN(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rN(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let rT={},rA=z.Ps`
  mutation resendVerificationCode($input: ResendVerificationCodeInput) {
    resendVerificationCode(input: $input)
  }
`;function rL(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function rF(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?rL(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rL(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let rM={},rU=z.Ps`
  mutation sendForgotPasswordEmail($input: SendForgotPasswordEmailInput!) {
    sendForgotPasswordEmail(input: $input) {
      devLink
      error {
        ...Error
      }
    }
  }
  ${Q.vN}
`;function rG(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function rB(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?rG(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rG(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let rV=()=>{let{refetch:e}=(0,D.Z)("cache-first",!0),{sendNotification:r}=(0,x.ZP)(),[t,{error:n,loading:i}]=function(e){let r=rZ(rZ({},rk),void 0);return rx.D(r_,r)}(),[o,{error:a,loading:s}]=function(e){let r=rD(rD({},rT),void 0);return rx.D(rA,r)}(),[l,{error:c,loading:u}]=function(e){let r=rS(rS({},rw),void 0);return rx.D(rP,r)}(),[d,{error:f,loading:m,data:b}]=function(e){let r=rF(rF({},rM),void 0);return rx.D(rU,r)}(),O=(0,p.useCallback)(async r=>{var n,i,o,a,s;try{let l=await t({variables:{input:{email:r.email,password:r["current-password"],captchaToken:(null==r?void 0:r.captcha)||void 0,rememberMe:r.rememberMe}},context:{headers:{[T.eX]:null===(o=(0,T.pc)())||void 0===o?void 0:o.token,[A.G]:(0,A.V)()}}}),c=null==l?void 0:null===(a=l.data)||void 0===a?void 0:a.login;if((0,M.Ro)(c))return(0,L.q)(G.Mk.SIFT_VERIFICATION_REQUIRED),{message:M.dx.SIFT_VERIFICATION_REQUIRED,memberId:null==c?void 0:c.memberId,reverifyToken:null==c?void 0:c.reverifyToken};if((0,M.YM)(c))return(0,L.q)(G.Mk.REVERIFY_REQUIRED),{message:M.dx.REVERIFY_REQUIRED,memberId:null==c?void 0:c.memberId,reverifyToken:null==c?void 0:c.reverifyToken};if((0,M.gC)(c))return e(),(0,L.q)(G.Mk.SUCCESS),(0,G.bF)(G.Mk.SUCCESS),{message:M.dx.LOGIN_SUCCESS};switch((0,L.q)(G.Mk.FAILURE),(0,G.bF)(`${G.Mk.FAILURE}-${(null==c?void 0:null===(s=c.error)||void 0===s?void 0:s.code)||M.dx.LOGIN_FAILURE}`),null==c?void 0:null===(n=c.error)||void 0===n?void 0:n.code){case M.dx.WRONG_CREDENTIALS_CODE:case M.dx.RATE_LIMIT_EXCEEDED:case M.dx.BLOCKED_IP:case M.dx.BLOCKED_MEMBER:case M.dx.PASSWORD_RESET_REQUIRED:case M.dx.BOUNCED:case M.dx.INITIAL_3RD_PARTY_REG:case M.dx.REVERIFY_ERROR_CODE:return{message:null==c?void 0:null===(i=c.error)||void 0===i?void 0:i.code};default:return{message:M.dx.LOGIN_FAILURE}}}catch(e){return(0,L.q)(G.Mk.FAILURE),(0,G.bF)(G.Mk.FAILURE),{message:M.dx.LOGIN_FAILURE}}},[t,e]),v=(0,p.useCallback)(async(e,r)=>{try{var t,n;let i=await d({variables:{input:{email:e,captchaCode:r}},context:{headers:{[T.eX]:null===(t=(0,T.pc)())||void 0===t?void 0:t.token,[A.G]:(0,A.V)()}}}),o=null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.sendForgotPasswordEmail;if(!(null!=o&&o.error))return(0,L.q)(G.Mk.FORGOT_PASSWORD_REQUEST_SUCCESS),(0,G.bF)(G.Mk.FORGOT_PASSWORD_REQUEST_SUCCESS),!0;return(0,L.q)(G.Mk.FORGOT_PASSWORD_REQUEST_FAILURE),(0,G.bF)(G.Mk.FORGOT_PASSWORD_REQUEST_FAILURE),!1}catch(e){return(0,L.q)(G.Mk.FORGOT_PASSWORD_REQUEST_FAILURE),(0,G.bF)(G.Mk.FORGOT_PASSWORD_REQUEST_FAILURE),!1}},[d]),g=(0,p.useCallback)(async e=>{try{var r;let t=await o({variables:{input:{memberId:e}}});if((null==t?void 0:null===(r=t.data)||void 0===r?void 0:r.resendVerificationCode)==="RESEND")return(0,L.q)(G.Mk.RESEND_VERIFICATION_CODE_SUCCESS),!0;return(0,L.q)(G.Mk.RESEND_VERIFICATION_CODE_FAILURE),!1}catch(e){return(0,L.q)(G.Mk.RESEND_VERIFICATION_CODE_FAILURE),!1}},[o]),y=(0,p.useCallback)(async r=>{try{var t;let n=await l({variables:{input:{memberId:r.memberId,code:r.verificationCode,reverifyToken:r.reverifyToken,rememberMe:r.rememberMe}}}),i=null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.checkSiftVerificationCode;if((null==i?void 0:i.status)==="INVALID")return(0,L.q)(G.Mk.CHECK_VERIFICATION_CODE_FAILURE),{message:M.dx.WRONG_CREDENTIALS_CODE};if((null==i?void 0:i.status)==="VALID"&&!(null!=i&&i.error))return e(),(0,L.q)(G.Mk.CHECK_VERIFICATION_CODE_SUCCESS),{message:M.dx.CHECK_VERIFICATION_CODE_SUCCESS};return(0,L.q)(G.Mk.CHECK_VERIFICATION_CODE_FAILURE),{message:M.dx.CHECK_VERIFICATION_CODE_FAILURE}}catch(e){return(0,L.q)(G.Mk.CHECK_VERIFICATION_CODE_FAILURE),{message:M.dx.CHECK_VERIFICATION_CODE_FAILURE}}},[l,e]);return(0,p.useEffect)(()=>{n&&r((0,V.jsx)(h.Z,rB({},U.Z.loginError)),{type:x.Dy.ERROR,autoClose:!0}),a&&r((0,V.jsx)(h.Z,rB({},U.Z.resendVerificationCodeError)),{type:x.Dy.ERROR,autoClose:!0}),c&&r((0,V.jsx)(h.Z,rB({},U.Z.verificationCodeError)),{type:x.Dy.ERROR,autoClose:!0})},[n,a,c,r]),(0,p.useEffect)(()=>{var e;(f||null!=b&&null!==(e=b.sendForgotPasswordEmail)&&void 0!==e&&e.error)&&r((0,V.jsx)(h.Z,rB({},U.Z.forgotPassowrdCodeError)),{type:x.Dy.ERROR,autoClose:!0})},[f,b,r]),{loading:i||s||u||m,login:O,sendForgotPassword:v,resendVerificationCode:g,checkVerificationCode:y}};function rK(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function rq(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?rK(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rK(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let r$={},rH=z.Ps`
  mutation customRegister($input: CustomRegisterInput!) {
    customRegister(input: $input) {
      error {
        ...Error
      }
    }
  }
  ${Q.vN}
`;function rW(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function rY(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?rW(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rW(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let rz={},rQ=z.Ps`
  mutation registerMemberWithEmail($input: MemberRegistrationWithEmailInput!) {
    registerMemberWithEmail(input: $input) {
      reverifyToken
      member {
        id
        name
        email
      }
      error {
        code
        message
      }
    }
  }
`;function rX(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function rJ(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?rX(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rX(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let r0={},r1=z.Ps`
  mutation registerMemberWithThirdPartyService(
    $input: MemberRegistrationWithThirdPartyServiceInput!
  ) {
    registerMemberWithThirdPartyService(input: $input) {
      member {
        id
        name
        email
      }
      errors {
        ...Error
      }
    }
  }
  ${Q.vN}
`;function r2(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}let r4=()=>{let{sendNotification:e}=(0,x.ZP)(),[r,{error:t,loading:n}]=function(e){let r=rY(rY({},rz),void 0);return rx.D(rQ,r)}(),[i,{error:o,loading:a}]=function(e){let r=rJ(rJ({},r0),void 0);return rx.D(r1,r)}(),[l,{error:c,loading:u}]=function(e){let r=rq(rq({},r$),void 0);return rx.D(rH,r)}(),d=(0,p.useCallback)(async e=>{try{var t,n,i,o,a,s;let l=await r({variables:{input:{name:e.name,password:e["new-password"],email:e.email,countryCode:e.countryCode,zipCode:e.zipCode,locale:e.locale,captchaCode:e.captcha||"",referenceGroupId:e.groupId,referenceEventId:e.eventId,returnUri:e.returnUri,terms:e.terms}},context:{headers:{[A.G]:(0,A.V)()}}}),c=null==l?void 0:null===(t=l.data)||void 0===t?void 0:t.registerMemberWithEmail;if((0,e_.lX)(c))return(0,G.w4)(),(0,L.q)(G.hf.SUCCESS),(0,G.n7)(G.hf.SUCCESS),null!=e&&null!==(o=e.terms)&&void 0!==o&&o.length&&(0,e2.a$)("success",!0),{message:e_.dK.REGISTER_SUCCESS,memberId:null==c?void 0:null===(a=c.member)||void 0===a?void 0:a.id,memberEmail:null==c?void 0:null===(s=c.member)||void 0===s?void 0:s.email,reverifyToken:null==c?void 0:c.reverifyToken};return(0,L.q)(G.hf.FAILURE),(0,G.n7)(`${G.hf.FAILURE}-${(null==c?void 0:null===(n=c.error)||void 0===n?void 0:n.code)||e_.dK.REGISTER_FAILURE}`),(0,e_.zg)(null==c?void 0:null===(i=c.error)||void 0===i?void 0:i.code)}catch(e){return(0,L.q)(G.hf.FAILURE),{message:e_.dK.REGISTER_FAILURE}}},[r]),f=(0,p.useCallback)(async(e,r,t,n)=>{let o,a;t===E.FR.Facebook&&(o=G.hf.FACEBOOK_SUCCESS,a=G.hf.FACEBOOK_FAILURE),t===E.FR.Apple&&(o=G.hf.APPLE_SUCCESS,a=G.hf.APPLE_FAILURE),t===E.FR.Google&&(o=G.hf.GOOGLE_SUCCESS,a=G.hf.GOOGLE_FAILURE);try{var s,l,c;let u=await i({variables:{input:{token:r,refreshToken:n,service:t,grantType:(0,B.hl)(t,!!n),name:e.name,email:e.email,countryCode:e.countryCode,zipCode:e.zipCode,locale:e.locale,terms:e.terms}},context:{headers:{[A.G]:(0,A.V)()}}}),d=null==u?void 0:null===(s=u.data)||void 0===s?void 0:s.registerMemberWithThirdPartyService;if(d&&!(null!=d&&null!==(l=d.errors)&&void 0!==l&&l.length))return(0,G.w4)(),(0,L.q)(o),(0,G.n7)(o),null!=e&&null!==(c=e.terms)&&void 0!==c&&c.length&&(0,e2.a$)("success",!0),!0;return(0,L.q)(a),(0,G.n7)(a),!1}catch(e){return(0,L.q)(a),(0,G.n7)(a),!1}},[i]),m=(0,p.useCallback)(async e=>{try{var r,t,n;let i=await l({variables:{input:{storeNumber:e.storeNumber,name:e.name,password:e["new-password"],email:e.email,countryCode:e.countryCode,zipCode:e.zipCode,locale:e.locale,captchaCode:e.captcha||"",provider:"Starbucks"}},context:{headers:{[A.G]:(0,A.V)()}}}),o=null==i?void 0:null===(r=i.data)||void 0===r?void 0:r.customRegister;if((0,e_.lX)(o))return(0,G.w4)(),(0,L.q)(G.hf.STARBUCKS_SUCCESS),(0,G.n7)(G.hf.STARBUCKS_SUCCESS),{message:e_.dK.REGISTER_SUCCESS};return(0,L.q)(G.hf.STARBUCKS_FAILURE),(0,G.n7)(`${G.hf.STARBUCKS_FAILURE}-${(null==o?void 0:null===(t=o.error)||void 0===t?void 0:t.code)||e_.dK.REGISTER_FAILURE}`),(0,e_.zg)(null==o?void 0:null===(n=o.error)||void 0===n?void 0:n.code)}catch(e){return(0,L.q)(G.hf.STARBUCKS_FAILURE),{message:e_.dK.REGISTER_FAILURE}}},[l]);return(0,p.useEffect)(()=>{(t||o||c)&&e((0,V.jsx)(h.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?r2(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r2(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({},ek.Z.registerError)),{type:x.Dy.ERROR,autoClose:!0})},[t,o,c,e]),{register:d,socialRegister:f,starbucksRegister:m,loading:a||n||u}};function r7(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function r8(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?r7(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r7(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let r6={},r9=z.Ps`
  mutation reverifyMember($input: ReverifyMemberInput!) {
    reverifyMember(input: $input) {
      error {
        ...Error
      }
    }
  }
  ${Q.vN}
`;function r5(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}let r3=e=>{let{sendNotification:r}=(0,x.ZP)(),[t,{error:n,loading:i}]=function(e){let r=r8(r8({},r6),void 0);return rx.D(r9,r)}();(0,p.useEffect)(()=>{n&&r((0,V.jsx)(h.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?r5(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r5(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({},e?ek.Z.reverifyRequestEmailError:U.Z.reverifyRequestEmailError)),{type:x.Dy.ERROR,autoClose:!0})},[n,e,r]);let o=(0,p.useCallback)(async r=>{try{var n,i;let o=await t({variables:{input:{reverifyToken:r.reverifyToken,memberId:Number(r.memberId),emailRedirectTo:""}}});if(!(null!=o&&null!==(n=o.data)&&void 0!==n&&null!==(i=n.reverifyMember)&&void 0!==i&&i.error))return(0,L.q)(e?G.hf.REVERIFY_REQUEST_EMAIL_AGAIN_SUCCESS:G.Mk.REVERIFY_REQUEST_EMAIL_AGAIN_SUCCESS),!0;return(0,L.q)(e?G.hf.REVERIFY_REQUEST_EMAIL_AGAIN_FAILURE:G.Mk.REVERIFY_REQUEST_EMAIL_AGAIN_FAILURE),!1}catch(r){return(0,L.q)(e?G.hf.REVERIFY_REQUEST_EMAIL_AGAIN_FAILURE:G.Mk.REVERIFY_REQUEST_EMAIL_AGAIN_FAILURE),!1}},[t,e]);return{loading:i,reverifyMember:o}};function te(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function tr(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?te(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):te(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let tt=484;function tn(e){let{isModal:r,onLoginSuccess:t,onRegisterSuccess:n,isOpen:i,onClose:o,initialState:a,onAuthModalToggleView:s,queryParams:l}=e,{query:u,asPath:g}=(0,f.useRouter)(),y=tr(tr({},u),l),j=a===B.f7.REGISTER,h=a===B.f7.FORGOT_PASSWORD,{loading:E,login:R,sendForgotPassword:x,resendVerificationCode:C,checkVerificationCode:S}=rV(),{register:w,socialRegister:P,starbucksRegister:I,loading:Z}=r4(),{facebookLogin:_,loading:N}=q(),{reverifyMember:D,loading:T}=r3(j),A=(0,M.S7)(`${(0,O.JL)(y)||(r?`${v.mCZ}${g}`:(0,v.cdl)())}`),L=(0,B.sh)(tr(tr({},y),{},{[O.R9]:A})),{registerUrl:F,loginUrl:U}=(0,k.Z)(A,l),G=(0,p.useMemo)(()=>d()(e=>function(){let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e===B.f7.REGISTER&&!i&&L){(0,M.d8)((0,v.bjX)(A,l),v.irs);return}r?(e===B.f7.LOGIN&&(null==t||t()),e===B.f7.REGISTER&&(null==n||n())):(0,M.d8)(A,v.irs)}),[r,A,t,n,l,L]),K=(0,p.useCallback)(()=>{r?s():(0,v.irs)(j?U:F)},[j,r,U,F,s]),$=j?(0,V.jsx)(rR,{returnUrl:A,registerHandler:w,socialRegisterHandler:P,isLoading:Z||T,onRegisterSuccess:G(B.f7.REGISTER),isModal:r,reverifyMember:D,onLoginClick:K,starbucksRegisterHandler:I,extraParams:l}):(0,V.jsx)(eJ,{returnUrl:A,loginHandler:R,forgotPasswordHandler:x,facebookLoginHandler:_,isLoading:E||N||T,resendVerificationCodeHandler:C,checkVerificationCodeHandler:S,onLoginSuccess:G(B.f7.LOGIN),isModal:r,reverifyMember:D,onRegisterClick:K,extraParams:l,disableBackButton:h,initialView:h?M.f7.FORGOT_PASSWORD:void 0});return(0,V.jsx)("div",{className:"flex flex-grow flex-col items-center",children:r?(0,V.jsx)(m.default,{isOpen:i,onClose:o,dataEventLabel:j?"Register modal":"Login modal",closeBtnDataEventLabel:j?"register-close-modal":"login-close-modal",className:c()("pl-0 pr-0 sm:pl-10 sm:pr-10","a27i9ef"),children:(0,V.jsx)("div",{className:"flex flex-col items-center px-6 sm:px-0",children:$})}):(0,V.jsx)(b.Z,{noPadding:j,className:c()("mb-16 mt-4 flex w-full flex-col items-center sm:mt-10"),children:(0,V.jsx)("div",{className:c()("relative flex w-full flex-col items-center sm:rounded-lg sm:border sm:border-gray2 sm:p-8 sm:pb-15","d1jywajc"),children:$})})})}var ti=tn;t(18091)},2069:function(e,r,t){"use strict";let n,i;t.d(r,{Ro:function(){return g},S7:function(){return v},YM:function(){return y},d8:function(){return O},dx:function(){return n},e$:function(){return h},f7:function(){return i},gC:function(){return j}});var o,a,s=t(11217),l=t(80417),c=t(21754),u=t(56348),d=t(71495),f=t(44821),p=t(11527);function m(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function b(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?m(Object(t),!0).forEach(function(r){(0,s.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}(o=n||(n={})).LOGIN_SUCCESS="login-succeeded",o.SIFT_VERIFICATION_REQUIRED="login-sift-verification-required",o.CHECK_VERIFICATION_CODE_SUCCESS="login-check-verification-code-succeeded",o.CHECK_VERIFICATION_CODE_FAILURE="login-check-verification-code-failed",o.REVERIFY_REQUIRED="login-reverify-required",o.LOGIN_FAILURE="login-failed",o.SIFT_VERIFY_ERROR_CODE="member_sift_verify_error",o.REVERIFY_ERROR_CODE="member_sent_reverify_email_error",o.WRONG_CREDENTIALS_CODE="member_wrong_credentials_error",o.RATE_LIMIT_EXCEEDED="member_login_fails_ip_error",o.BLOCKED_IP="member_blocked_ip_error",o.BLOCKED_MEMBER="blocked_member_error",o.PASSWORD_RESET_REQUIRED="member_password_reset_required_error",o.BOUNCED="member_bounced_error",o.INITIAL_3RD_PARTY_REG="member_registered_by_third_party_error",(a=i||(i={})).LOGIN="LOGIN",a.FORGOT_PASSWORD="FORGOT_PASSWORD",a.SIFT_VERIFICATION="SIFT_VERIFICATION",a.REVERIFY_MEMBER="REVERIFY_MEMBER",a.FORGOT_PASSWORD_SUCCESS="FORGOT_PASSWORD_SUCCESS";let O=(e,r)=>{r(e&&"string"==typeof e&&(0,u.En)(e)?e:(0,c.cdl)())},v=e=>{try{return["","/"].includes(new URL(e).pathname)?(0,c.cdl)():e}catch(e){return(0,c.cdl)()}},g=e=>{var r;return(null==e?void 0:e.verificationRequired)&&(null==e?void 0:e.memberId)&&(null==e?void 0:e.memberId)!=="0"&&(null==e?void 0:e.reverifyToken)&&(null==e?void 0:null===(r=e.error)||void 0===r?void 0:r.code)===n.SIFT_VERIFY_ERROR_CODE},y=e=>{var r;return(null==e?void 0:e.memberId)&&(null==e?void 0:e.memberId)!=="0"&&(null==e?void 0:e.reverifyToken)&&(null==e?void 0:null===(r=e.error)||void 0===r?void 0:r.code)===n.REVERIFY_ERROR_CODE},j=e=>e&&!(null!=e&&e.error),h=(e,r)=>{switch(e){case n.WRONG_CREDENTIALS_CODE:return(0,p.jsx)(l.Z,b({},d.Z.loginValidationError));case n.RATE_LIMIT_EXCEEDED:case n.BLOCKED_IP:return(0,p.jsx)(l.Z,b({},d.Z.loginRateLimitError));case n.BLOCKED_MEMBER:return(0,p.jsx)(l.Z,b(b({},d.Z.loginBlockedMemberError),{},{values:{helpLink:(0,p.jsx)("a",{href:(0,c.dhN)(),className:"ds-font-body-medium underline hover:no-underline","data-element-name":f.Nh.disabledAccount,children:(0,p.jsx)(l.Z,b({},d.Z.helpCenter))})}}));case n.BOUNCED:return(0,p.jsx)(l.Z,b(b({},d.Z.loginBouncedError),{},{values:{helpLink:(0,p.jsx)("a",{href:(0,c.tBC)(),className:"ds-font-body-medium underline hover:no-underline","data-element-name":f.Nh.supportTicket,children:(0,p.jsx)(l.Z,b({},d.Z.submitRequest))})}}));case n.PASSWORD_RESET_REQUIRED:return(0,p.jsx)(l.Z,b(b({},d.Z.loginPasswordResetError),{},{values:{forgotPasswordLink:(0,p.jsx)("a",{onClick:r,href:(0,c.TtQ)(),className:"ds-font-body-medium underline hover:no-underline","data-element-name":f.Nh.forgotPassword,children:(0,p.jsx)(l.Z,b({},d.Z.here))})}}));case n.REVERIFY_ERROR_CODE:return(0,p.jsx)(l.Z,b({},d.Z.reverifyError));case n.INITIAL_3RD_PARTY_REG:return(0,p.jsx)(l.Z,b(b({},d.Z.initial3rdPartyError),{},{values:{LINK:(0,p.jsx)("a",{onClick:r,href:(0,c.TtQ)(),className:"ds-font-body-medium underline hover:no-underline","data-element-name":f.Nh.forgotPassword,children:(0,p.jsx)(l.Z,b({},d.Z.initial3rdPartyErrorLink))})}}));default:return(0,p.jsx)(l.Z,b({},d.Z.loginError))}}},66601:function(e,r,t){"use strict";var n=t(50959),i=t(74440),o=t(61711),a=t(4168),s=t(89281),l=t(7566);let c=()=>{var e,r;let[t,{error:c,data:u,called:d}]=(0,i.G)(),f=c||(null==u?void 0:null===(e=u.loginWithThirdPartyService)||void 0===e?void 0:e.error),p=!!(d&&u&&!c&&!(null!=u&&null!==(r=u.loginWithThirdPartyService)&&void 0!==r&&r.error)),m=(0,n.useCallback)((e,r,n)=>{var i;t({variables:{input:{token:e,refreshToken:n,grantType:(0,l.hl)(r,!!n),service:r}},context:{headers:{[o.eX]:null===(i=(0,o.pc)())||void 0===i?void 0:i.token,[a.G]:(0,a.V)()},uri:s.M}})},[t]);return{login:m,loginError:f,loginSuccess:p,called:d}};r.Z=c},36763:function(e,r,t){"use strict";var n=t(96470),i=t(11217),o=t(19803),a=t.n(o),s=t(50959),l=t(67245),c=t.n(l),u=t(11527);let d=["className","children","wrapperId","style","wrapperStyle","isHideIcon","inputClassName","contentClassName"];function f(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function p(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?f(Object(t),!0).forEach(function(r){(0,i.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let m=e=>(0,u.jsx)("svg",p(p({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","data-testid":"svg-checked"},e),{},{children:(0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})),b=e=>(0,u.jsx)("svg",p(p({xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24","data-testid":"svg-unchecked"},e),{},{children:(0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})})),O=e=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(m,p(p({},e),{},{className:`fill-current ${e.checked?"block":"hidden"}`})),(0,u.jsx)(b,p(p({},e),{},{className:`fill-current ${e.checked?"hidden":"block"}`}))]}),v=(0,s.forwardRef)((e,r)=>{let{className:t,children:i,wrapperId:o,style:s,wrapperStyle:l,isHideIcon:f,inputClassName:m,contentClassName:b}=e,v=(0,n.Z)(e,d);return(0,u.jsxs)("label",{className:a()("flex",c().Checkbox,t),htmlFor:v.id,id:o,style:l,"data-testid":"Checkbox",children:[(0,u.jsxs)("div",{className:a()("mr-2 self-start text-viridian",b),children:[(0,u.jsx)("input",p(p({ref:r,type:"checkbox"},v),{},{className:a()("absolute z-0 h-1 w-1 overflow-hidden opacity-0",m)})),!f&&(0,u.jsx)(O,{"aria-hidden":"true",checked:v.checked})]}),i]})});v.displayName="Checkbox",r.Z=v},29139:function(e,r,t){"use strict";t.d(r,{A:function(){return E}});var n=t(11217),i=t(96470),o=t(19803),a=t.n(o),s=t(87720),l=t(50959),c=t(36122),u=t(80417),d=t(36763),f=t(93713),p=t(32128),m=t(11527);function b(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}let O=e=>{let{id:r,className:t,children:i}=e,{submitCount:o}=(0,s.u6)(),[{value:l},{touched:c,error:f},{setValue:O}]=(0,s.U$)(r),v=(o>0||c)&&f,g=`${r}-error`;return(0,m.jsxs)("div",{className:a()("flex flex-col",t),children:[(0,m.jsx)(d.Z,{id:r,name:r,"data-testid":r,className:p.X2,"aria-describedby":v?g:void 0,checked:l,onChange:e=>O(e.currentTarget.checked),children:(0,m.jsx)("span",{className:"mr-2",children:i})}),v&&(0,m.jsx)("div",{id:g,className:"ds-font-tiny mt-1 text-alertRed",children:(0,m.jsx)(u.Z,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?b(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({},f))})]})};var v=t(47160),g=t(10074);let y=["terms"];function j(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function h(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?j(Object(t),!0).forEach(function(r){(0,n.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):j(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let E=e=>{let{terms:r}=e,t=(0,i.Z)(e,y),n=(0,c.Z)(),{values:o,setValues:b,setFieldValue:j,getFieldMeta:E}=(0,s.u6)(),R=null==r?void 0:r.every(e=>{let{id:r}=e;return!!o[r]});return(0,l.useEffect)(()=>{null!=r&&r.length&&r.forEach(e=>{let{value:r}=E(e.id);void 0===r&&j(e.id,!1)},{})},[r]),(0,m.jsx)("div",h(h({},t),{},{className:a()(t.className),children:(0,m.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,m.jsxs)("div",{className:"flex space-x-1",children:[(0,m.jsx)("span",{className:"font-medium",children:(0,m.jsx)(u.Z,h({},v.Z.dataUsageConsentTitle))}),(0,m.jsx)(f.Z,{className:"max-w-[320px]",ariaLabel:n.formatMessage(v.Z.dataUsageConsentHint),toolTipText:(0,m.jsx)(u.Z,h({},v.Z.dataUsageConsentHint)),hasCloseButton:!0,tooltipClassName:"sm:max-w-xs ds-font-small"})]}),(0,m.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,m.jsx)(d.Z,{id:"accept-all",name:"accept-all","data-testid":"accept-all",className:p.X2,checked:R,onChange:()=>{b(h(h({},o??{}),r.reduce((e,r)=>h(h({},e),{},{[r.id]:!R}),{})))},children:(0,m.jsx)("span",{className:"mr-2",children:(0,m.jsx)(u.Z,h({},v.Z.dataConsentAcceptAll))})}),(0,m.jsx)("hr",{className:"mt-4 border-0 border-b border-gray3"}),null==r?void 0:r.map(e=>{let r=g.WF[null==e?void 0:e.id];return r?(0,m.jsx)(O,{id:e.id,children:(0,m.jsx)(u.Z,h(h({},r.text),{},{values:{LINK:null!=r&&r.linkUrl?(0,m.jsx)("a",{className:"text-viridian",target:"_blank",rel:"noreferrer",href:null==r?void 0:r.linkUrl,children:(0,m.jsx)(u.Z,h({},null==r?void 0:r.linkText))}):void 0}}))},e.id):null})]})]})}))}},21866:function(e,r,t){"use strict";t.d(r,{En:function(){return a},LY:function(){return s},Y0:function(){return d},a$:function(){return c},py:function(){return l},yb:function(){return u}});var n=t(59002),i=t.n(n),o=t(76944);let a="Terms",s="TermsModal",l="TermsSubmit",c=(e,r)=>(0,o.ZP)({event:"gaEvent",eventCategory:a,eventAction:r?"AcceptTermsReg":"AcceptTermsModal",eventLabel:e}),u=i()(()=>{(0,o.ZP)({event:"gaEvent",eventCategory:a,eventLabel:s,eventAction:"shown"})}),d=i()(()=>{(0,o.ZP)({event:"gaEvent",eventCategory:a,eventLabel:"TermsReg",eventAction:"shown"})})},10074:function(e,r,t){"use strict";let n;t.d(r,{WF:function(){return w},YU:function(){return I},e6:function(){return Z}});var i=t(11217),o=t(50959),a=t(36122),s=t(74596),l=t(61439);function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach(function(r){(0,i.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let d={},f=s.Ps`
  mutation acceptTerms($input: AcceptTermsInput!) {
    acceptTerms(input: $input) {
      errors {
        code
        message
      }
    }
  }
`;var p=t(76185);function m(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function b(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?m(Object(t),!0).forEach(function(r){(0,i.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let O={},v=s.Ps`
  query termsDueByLocation($input: TermsDueByLocationInput!) {
    termsDueByLocation(input: $input) {
      termsDue {
        id
        kind
        required
      }
    }
  }
`;var g=t(91757),y=t(71511),j=t(42150),h=t(21754),E=t(47160),R=t(21866),x=t(32128);function C(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function S(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?C(Object(t),!0).forEach(function(r){(0,i.Z)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}(n||(n={})).KISA="kisa";let w={[g.K5.KisaTerms]:{text:E.Z.kisaTerms,linkUrl:(0,h.ziY)(),linkText:E.Z.dataConsentLink},[g.K5.KisaPersonal]:{text:E.Z.kisaPersonal_v2,linkUrl:(0,h.VBv)(),linkText:E.Z.dataConsentLink},[g.K5.KisaDataTransfer]:{text:E.Z.kisaDataTransfer,linkUrl:(0,h.$m8)(),linkText:E.Z.dataConsentLink},[g.K5.KisaOptional]:{text:E.Z.kisaOptional_v2,linkUrl:(0,h.VBv)(),linkText:E.Z.dataConsentLink},[g.K5.KisaEmailMarketing]:{text:E.Z.kisaEmailMarketing_v2,linkUrl:(0,h.VBv)(),linkText:E.Z.dataConsentLink}},P=e=>null==e?void 0:e.some(e=>e.kind===n.KISA),I=()=>{var e;let{0:r,1:t}=(0,o.useState)(),{data:n}=function(e){let r=b(b({},O),e);return p.a(v,r)}({variables:{input:{countryCode:r}},skip:!r}),i=null==n?void 0:null===(e=n.termsDueByLocation)||void 0===e?void 0:e.termsDue,a=(0,x.Wp)(i),s=(0,o.useCallback)(e=>{e&&t(e)},[]),l=P(i);return{terms:i,hasDuesTerms:a,hasKISA:l,onCountryChange:s}},Z=e=>{var r,t,n;let{user:i}=(0,j.Z)("cache-first",e),[s,{loading:c}]=function(e){let r=u(u({},d),void 0);return l.D(f,r)}(),{0:p,1:m}=(0,o.useState)([]),{sendNotification:b}=(0,y.ZP)(),O=(0,a.Z)(),v=(0,o.useCallback)(async e=>{try{var r,t,n;let i=await s({variables:{input:{terms:null==e?void 0:e.map(e=>({type:e}))}}});if((null==i?void 0:null===(r=i.data)||void 0===r?void 0:null===(t=r.acceptTerms)||void 0===t?void 0:null===(n=t.errors)||void 0===n?void 0:n.length)===0)m(r=>[...r,...e]),(0,R.a$)("success");else throw Error("error")}catch(e){b(O.formatMessage(E.Z.saveError),{id:"terms",type:y.Dy.ERROR}),(0,R.a$)("error")}},[s,O,b]),g=null==i?void 0:null===(r=i.terms)||void 0===r?void 0:null===(t=r.termsDue)||void 0===t?void 0:null===(n=t.map(e=>S(S({},e),{},{id:(0,x.Ux)(e.id)})))||void 0===n?void 0:n.filter(e=>!(null!=p&&p.includes(e.id))),h=(0,x.Wp)(g),C=P(g);return{acceptTerms:v,loading:c,terms:g,hasDuesTerms:h,hasKISA:C}}},4168:function(e,r,t){"use strict";t.d(r,{G:function(){return i},V:function(){return o}});var n=t(42296);let i="X-Tracking-Request-Id",o=()=>(0,n.Z)()},18091:function(e){e.exports={a27i9ef:"a27i9ef",d1jywajc:"d1jywajc"}},12464:function(e){e.exports={c1jwr8t4:"c1jwr8t4"}},69985:function(e){e.exports={c1akf99s:"c1akf99s"}},81523:function(e){e.exports={sq0xflc:"sq0xflc"}},78937:function(e){e.exports={dljoyr2:"dljoyr2"}},35884:function(e){e.exports={sbdsy28:"sbdsy28"}},11790:function(e){e.exports={c1g28vq9:"c1g28vq9"}},67245:function(e){e.exports={Checkbox:"Checkbox_Checkbox__zfZJ_"}}}]);