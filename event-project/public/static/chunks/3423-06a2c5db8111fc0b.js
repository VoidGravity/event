"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3423],{73538:function(e,n,t){let l;t.d(n,{P:function(){return a},w:function(){return l}});var r,i=t(4776);(r=l||(l={})).OFF="OFF",r.FEATURE="FEATURE",r.UNFEATURE="UNFEATURE",r.EDIT="EDIT",r.CANCEL="CANCEL",r.DELETE="DELETE",r.CANCEL_FEEDBACK="CANCEL_FEEDBACK",r.WELCOME_GROUP="WELCOME_GROUP";let a=()=>(0,i.q)()},3423:function(e,n,t){t.d(n,{AH:function(){return U},m0:function(){return g},tv:function(){return P}});var l,r,i=t(11217),a=t(50959),o=t(36122),u=t(22754),d=t(70349),E=t(2959),s=t(54540),v=t(61733),c=t(12592),C=t(71511),S=t(76198),f=t(48563),R=t(42230),p=t(86054),O=t(34188),_=t(21754),y=t(73538);function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,l)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach(function(n){(0,i.Z)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}let U=(0,a.createContext)(null),g=()=>(0,a.useContext)(U);(l=r||(r={}))[l.FEATURE_SUCCESS=0]="FEATURE_SUCCESS",l[l.UNFEATURE_SUCCESS=1]="UNFEATURE_SUCCESS",l[l.OPEN_RSVP_SUCCESS=2]="OPEN_RSVP_SUCCESS",l[l.CLOSE_RSVP_SUCCESS=3]="CLOSE_RSVP_SUCCESS",l[l.GENERIC_ERROR=4]="GENERIC_ERROR";let h={[r.FEATURE_SUCCESS]:R.k.eventFeatureSuccess,[r.UNFEATURE_SUCCESS]:R.k.eventUnfeatureSuccess,[r.OPEN_RSVP_SUCCESS]:R.k.eventIsOpen,[r.CLOSE_RSVP_SUCCESS]:R.k.eventIsClosed,[r.GENERIC_ERROR]:R.k.genericError},m=()=>new Date().toISOString(),N=(e,n)=>t=>t===e?n:t,w=(e,n,t)=>{e.modify({broadcast:!1,optimistic:!0,id:e.identify({__typename:"Event",id:t}),fields:{actions:e=>null==e?void 0:e.map(N(u.AO.Unfeature,u.AO.Feature)),recentActivity:m}}),e.modify({broadcast:!1,optimistic:!0,id:e.identify({__typename:"Group",id:n}),fields:{featuredEvent:()=>null,recentActivity:m}})},F=(e,n,t)=>{e.modify({broadcast:!1,optimistic:!0,id:e.identify({__typename:"Event",id:t}),fields:{actions:e=>null==e?void 0:e.map(N(u.AO.Feature,u.AO.Unfeature)),recentActivity:m}}),e.modify({broadcast:!1,optimistic:!0,id:e.identify({__typename:"Group",id:n}),fields:{featuredEvent:()=>({__ref:`Event:${t}`}),recentActivity:m}})},T=(e,n)=>{e.modify({broadcast:!1,optimistic:!0,id:e.identify({__typename:"Event",id:n}),fields:{actions:e=>null==e?void 0:e.map(N(u.AO.Open,u.AO.Close)),rsvpSettings:e=>b(b({},e),{},{rsvpsClosed:!1}),recentActivity:m}})},D=(e,n)=>{e.modify({broadcast:!1,optimistic:!0,id:e.identify({__typename:"Event",id:n}),fields:{actions:e=>null==e?void 0:e.map(N(u.AO.Close,u.AO.Open)),rsvpSettings:e=>b(b({},e),{},{rsvpsClosed:!0}),recentActivity:m}})},P=(e,n,t)=>{let{groupId:l,urlname:i}=n,u=(0,o.Z)(),{start:R,complete:A}=(0,O.Li)(),{sendNotification:b}=(0,C.ZP)(),U=(0,a.useCallback)(e=>{let n=[r.GENERIC_ERROR].includes(e)?C.Dy.ERROR:C.Dy.SUCCESS,t=h[e];t&&b(u.formatMessage(t),{type:n,id:`${e}`})},[b,u]),[g]=(0,s.K)(),[m]=(0,c.K)(),[N]=(0,E.g)(),[P]=(0,v.J)(),[k]=(0,d.R)(),I=(0,a.useCallback)(async(e,n)=>{R();try{var t,i,a,o,u,d,E,s;if(!(n?!(null!==(t=await m({variables:{input:{eventId:e,groupId:l}},update:(n,t)=>{var r,i,a;null!=t&&null!==(r=t.data)&&void 0!==r&&null!==(i=r.unfeatureEvent)&&void 0!==i&&null!==(a=i.errors)&&void 0!==a&&a.length||w(n,l,e)}}))&&void 0!==t&&null!==(i=t.data)&&void 0!==i&&null!==(a=i.unfeatureEvent)&&void 0!==a&&null!==(o=a.errors)&&void 0!==o&&o.length):!(null!==(u=await g({variables:{input:{eventId:e,groupId:l}},update:(n,t)=>{var r,i,a;null!=t&&null!==(r=t.data)&&void 0!==r&&null!==(i=r.featureEvent)&&void 0!==i&&null!==(a=i.errors)&&void 0!==a&&a.length||F(n,l,e)}}))&&void 0!==u&&null!==(d=u.data)&&void 0!==d&&null!==(E=d.featureEvent)&&void 0!==E&&null!==(s=E.errors)&&void 0!==s&&s.length)))throw Error("fail");U(n?r.UNFEATURE_SUCCESS:r.FEATURE_SUCCESS)}catch(e){U(r.GENERIC_ERROR)}A()},[A,g,l,U,R,m]),L=(0,a.useCallback)(t=>{e(y.w.FEATURE,async()=>await I(null==t?void 0:t.id,!1),null==n?void 0:n.hasFeatured)},[I,null==n?void 0:n.hasFeatured,e]),G=(0,a.useCallback)(n=>{e(y.w.UNFEATURE,async()=>await I(null==n?void 0:n.id,!0))},[I,e]),j=(0,a.useCallback)(n=>{if(!(null!=n&&n.isRecurring))return!1;e(y.w.EDIT,e=>{let t=(0,_.U6k)(i,null==n?void 0:n.id),l=e===f.EditOptionValues.EditlAll?(0,_.JWb)(t):(0,_.H7t)(t);window.open(l,"_self")})},[e,i]),V=(0,a.useCallback)(n=>{e(y.w.CANCEL,async l=>{R();try{var a,o,u;let r=l===S.CancelOptionValues.CancelAll,d=l===S.CancelOptionValues.CanceledAndDeleted,E=await N({variables:{input:{eventId:null==n?void 0:n.id,removeFromCalendar:d||r,updateSeries:r}},update:(e,l)=>{var r,i,a;null!=l&&null!==(r=l.data)&&void 0!==r&&null!==(i=r.deleteEvent)&&void 0!==i&&null!==(a=i.errors)&&void 0!==a&&a.length||null==t||t(null==n?void 0:n.id)}});if(null!=E&&null!==(a=E.data)&&void 0!==a&&null!==(o=a.deleteEvent)&&void 0!==o&&null!==(u=o.errors)&&void 0!==u&&u.length)throw Error("fail");l===S.CancelOptionValues.Cancel&&(0,p.YQ)((0,_.U6k)(i,null==n?void 0:n.id,{[_.MkY.Canceled]:"true"})),e(y.w.CANCEL_FEEDBACK,void 0,{isSeries:r,isCancelDelete:d,name:null==n?void 0:n.name})}catch(e){U(r.GENERIC_ERROR)}A()},n.isRecurring)},[A,N,e,t,U,R,i]),H=(0,a.useCallback)(n=>{e(y.w.DELETE,async()=>{R();try{var l,i,a;let r=await N({variables:{input:{eventId:null==n?void 0:n.id,removeFromCalendar:!0,updateSeries:!1}},update:(e,l)=>{var r,i,a;null!=l&&null!==(r=l.data)&&void 0!==r&&null!==(i=r.deleteEvent)&&void 0!==i&&null!==(a=i.errors)&&void 0!==a&&a.length||t(null==n?void 0:n.id)}});if(null!=r&&null!==(l=r.data)&&void 0!==l&&null!==(i=l.deleteEvent)&&void 0!==i&&null!==(a=i.errors)&&void 0!==a&&a.length)throw Error("fail");e(y.w.CANCEL_FEEDBACK,void 0,{isSeries:!1,isCancelDelete:!0,name:null==n?void 0:n.name})}catch(e){U(r.GENERIC_ERROR)}A()},null==n?void 0:n.isDraft)},[A,N,e,t,U,R]),K=(0,a.useCallback)(async e=>{R();try{var n,t,l;let i=await P({variables:{input:{eventId:null==e?void 0:e.id}},update:(n,t)=>{var l,r,i;null!=t&&null!==(l=t.data)&&void 0!==l&&null!==(r=l.openEventRsvps)&&void 0!==r&&null!==(i=r.errors)&&void 0!==i&&i.length||T(n,null==e?void 0:e.id)}});if(null!=i&&null!==(n=i.data)&&void 0!==n&&null!==(t=n.openEventRsvps)&&void 0!==t&&null!==(l=t.errors)&&void 0!==l&&l.length)throw Error("fail");U(r.OPEN_RSVP_SUCCESS)}catch(e){U(r.GENERIC_ERROR)}A()},[A,P,U,R]),M=(0,a.useCallback)(async e=>{R();try{var n,t,l;let i=await k({variables:{input:{eventId:null==e?void 0:e.id}},update:(n,t)=>{var l,r,i;null!=t&&null!==(l=t.data)&&void 0!==l&&null!==(r=l.closeEventRsvps)&&void 0!==r&&null!==(i=r.errors)&&void 0!==i&&i.length||D(n,null==e?void 0:e.id)}});if(null!=i&&null!==(n=i.data)&&void 0!==n&&null!==(t=n.closeEventRsvps)&&void 0!==t&&null!==(l=t.errors)&&void 0!==l&&l.length)throw Error("fail");U(r.CLOSE_RSVP_SUCCESS)}catch(e){U(r.GENERIC_ERROR)}A()},[k,A,U,R]);return{onFeature:L,onUnFeature:G,onEdit:j,onCancel:V,onDelete:H,onOpenRSVP:K,onCloseRSVP:M}}},86054:function(e,n,t){let l,r;t.d(n,{$K:function(){return d},CE:function(){return r},Gs:function(){return S},K8:function(){return C},YQ:function(){return f},fW:function(){return u},jk:function(){return c},oI:function(){return s},s0:function(){return l},tb:function(){return v},zz:function(){return E}});var i,a,o=t(96131);(i=l||(l={}))[i.START=3]="START",i[i.IN_PROGRESS=5]="IN_PROGRESS",i[i.ALMOST_DONE=6]="ALMOST_DONE",(a=r||(r={}))[a.START=1]="START",a[a.IN_PROGRESS=2]="IN_PROGRESS",a[a.ALMOST_DONE=5]="ALMOST_DONE",a[a.DONE=6]="DONE";let u="organizerOnboarding.getStartedBlock.appearance",d="get-started-denied-banner-hidden",E="get-started-follow-up-banner-hidden",s="get-started-mixed-banner-hidden",v="get-started-block-hidden",c=1095,C=e=>"true"===o.Z.get(e),S=(e,n)=>e.find(e=>{var t;return(null==e?void 0:null===(t=e.node)||void 0===t?void 0:t.groupApprovalStatus)===n}),f=e=>{window.open(e,"_blank","noopener,noreferrer")}},4776:function(e,n,t){let l;t.d(n,{q:function(){return o}});var r,i=t(50959);(r=l||(l={})).SHOW="show",r.CLOSE="close";let a=(e,n)=>{switch(n.type){case l.CLOSE:return{mode:"OFF"};case l.SHOW:return{mode:(null==n?void 0:n.mode)||"OFF",successHandler:null==n?void 0:n.successHandler,args:null==n?void 0:n.args};default:return e}},o=()=>{let{0:e,1:n}=(0,i.useReducer)(a,{mode:"OFF"}),t=(0,i.useCallback)(()=>{n({type:l.CLOSE})},[]);return{state:e,closeDialog:t,openDialog:function(e,t){for(var r=arguments.length,i=Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];n({type:l.SHOW,mode:e,successHandler:t,args:i})},bootstrapDialog:function(e,t){for(var r=arguments.length,i=Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];return function(){for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];n({type:l.SHOW,mode:e,successHandler:t,args:[...i??[],...a??[]]})}}}}}}]);